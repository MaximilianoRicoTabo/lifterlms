!function(s){window.llms=window.llms||{};window.llms.admin_fields={image:new function(){var e=this,t=s(".llms-image-field-upload");return this.bind=function(){t.on("click",function(){e.open_media_lib(s(this))}),s(".llms-image-field-remove").on("click",function(){e.update_image(s(this),"","")})},this.open_media_lib=function(t){var l=this;if(!(i=null))var e=t.attr("data-frame-title")||LLMS.l10n.translate("Select an Image"),n=t.attr("data-frame-button")||LLMS.l10n.translate("Select Image"),i=wp.media.frames.file_frame=wp.media({title:e,button:{text:n},multiple:!1});i.on("select",function(){var e=i.state().get("selection").first().toJSON();l.update_image(t,e.id,e.url)}),i.open()},this.update_image=function(e,t,l){var n=s("#"+e.attr("data-id")),i=e.prevAll("img.llms-image-field-preview"),a=e.hasClass("llms-image-field-remove")?e:e.next(".llms-image-field-remove");n.val(t),i.attr("src",l),""!==t?a.removeClass("hidden"):a.addClass("hidden")},t.length&&this.bind(),this}},window.llms.widgets=function(){return this.$widgets=s(".llms-widget"),this.$info_toggles=s(".llms-widget-info-toggle"),this.init=function(){this.bind()},this.bind=function(){var l=this;this.$info_toggles.on("hover",function(){var e=s(this).closest(".llms-widget"),t=(e.find(".llms-widget-info"),e.hasClass("info-showing")?"hide":"show");l.$widgets.removeClass("info-showing"),"show"==t&&e.addClass("info-showing")})},this.init(),this};new window.llms.widgets;s.fn.llmsPostsSelect2=function(t){var l=this,e=(t=t||{},{multiple:!1,placeholder:void 0!==LLMS.l10n?LLMS.l10n.translate("Select a Course/Membership"):"Select a Course/Membership",post_type:l.attr("data-post-type")||"post",post_statuses:l.attr("data-post-statuses")||"publish",instructor_id:null,allow_clear:l.attr("data-post-type")||!1,width:null});s.each(e,function(e){l.attr("data-"+e)&&(t[e]=l.attr("data-"+e))}),"multiple"===l.attr("multiple")&&(t.multiple=!0),t=s.extend(e,t),this.llmsSelect2({allowClear:t.allow_clear,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(e){return{action:"select2_query_posts",page:e.page?e.page-1:0,post_type:t.post_type,instructor_id:t.instructor_id,post_statuses:t.post_statuses,term:e.term,_ajax_nonce:window.llms.ajax_nonce}},processResults:function(e,t){return{results:function t(e){return Array.isArray(e)?s.map(e,function(e){return{text:(t=e).name,id:t.id};var t}):s.map(e,function(e){return{text:e.label,children:t(e.items)}})}(e.items),pagination:{more:e.more}}}},cache:!0,placeholder:t.placeholder,multiple:t.multiple,width:t.width})},s("select.llms-posts-select2").llmsPostsSelect2(),s.fn.llmsStudentsSelect2=function(t){var l=this,e=(t=t||{},{allow_clear:!1,enrolled_in:"",multiple:!1,not_enrolled_in:"",placeholder:void 0!==LLMS.l10n?LLMS.l10n.translate("Select a student"):"Select a student",roles:"",width:"100%"});return s.each(e,function(e){l.attr("data-"+e)&&(t[e]=l.attr("data-"+e))}),t=s.extend(e,t),this.llmsSelect2({allowClear:t.allow_clear,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(e){return{_ajax_nonce:window.llms.ajax_nonce,action:"query_students",page:e.page,not_enrolled_in:e.not_enrolled_in||t.not_enrolled_in,enrolled_in:e.enrolled_in||t.enrolled_in,roles:e.roles||t.roles,term:e.term}},processResults:function(e,t){return{results:s.map(e.items,function(e){return{text:e.name+" <"+e.email+">",id:e.id}}),pagination:{more:e.more}}}},cache:!0,placeholder:t.placeholder,multiple:t.multiple,width:t.width}),this},window.llms.emailConnectors={registerClient:function(e,t){var a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("action",e),s.each(t,function(e,t){var l,n,i;l=e,n=t,(i=document.createElement("input")).setAttribute("type","hidden"),i.setAttribute("name",l),i.setAttribute("value",n),a.appendChild(i)}),document.body.appendChild(a),a.submit()},remoteInstall:function(l,e,t){l.parent().find(".llms-error").remove(),s.post(ajaxurl,e,t).fail(function(e){LLMS.Spinner.stop(l);var t=e.responseJSON&&e.responseJSON.message?e.responseJSON.message:e.responseText;t&&s('<p class="llms-error">'+LLMS.l10n.replace("Error: %s",{"%s":t})+"</p>").insertAfter(l)})}}}(jQuery);
//# sourceMappingURL=../maps/js/llms-admin.min.js.map
