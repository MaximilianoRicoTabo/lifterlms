!function(e){function t(t){for(var i,s,o=t[0],l=t[1],a=0,c=[];a<o.length;a++)s=o[a],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&c.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(r&&r(t);c.length;)c.shift()()}var i={},n={0:0};function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(){return Promise.resolve()},s.m=e,s.c=i,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var r=l;s(s.s=28)}([function(e,t){e.exports=window.jQuery},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return{media_lib:null,events:{"click .llms-add-image":"open_media_lib",'click a[href="#llms-edit-slug"]':"make_slug_editable",'click a[href="#llms-remove-image"]':"remove_image","change .llms-editable-select select":"on_select",'change .llms-switch input[type="checkbox"]':"toggle_switch","change .llms-editable-radio input":"on_radio_select","focusin .llms-input":"on_focus","focusout .llms-input":"on_blur","keydown .llms-input":"on_keydown",'input .llms-input[type="number"]':"on_blur","paste .llms-input[data-formatting]":"on_paste"},get_allowed_tags:function(e){return e.attr("data-formatting")?_.map(e.attr("data-formatting").split(","),(function(e){return e.trim()})):["b","i","u","strong","em"]},get_content:function(e){return"INPUT"===e[0].tagName?e.val():e.attr("data-formatting")||e.hasClass("ql-editor")?_.stripFormatting(e.html(),this.get_allowed_tags(e)):e.text()},has_changed:function(e){var t=(0,i.default)(e.target);return t.attr("data-original-content")!==this.get_content(t)},is_valid:function(e){var t=this,n=(0,i.default)(e.target),s=this.get_content(n),o=n.attr("data-type");if((n.attr("required")||n.attr("data-required"))&&s.length<1)return!1;if("url"===o||"video"===o){if(!this._validate_url(this.get_content(n)))return!1}else"permalink"===o&&LLMS.Ajax.call({data:{action:"llms_builder",action_type:"get_permalink",course_id:window.llms_builder.CourseModel.get("id"),id:t.model.get("id"),title:t.model.get("title"),slug:s},beforeSend:function(){LLMS.Spinner.start(n.closest(".llms-editable-toggle-group"),"small")},success:function(e){e.permalink&&e.slug&&(t.model.set("permalink",e.permalink),t.model.set("name",e.slug),t.render())}});return!0},init_datepickers:function(){this.$el.find(".llms-editable-date input").each((function(){(0,i.default)(this).datetimepicker({format:(0,i.default)(this).attr("data-date-format")||"Y-m-d h:i A",datepicker:void 0===(0,i.default)(this).attr("data-date-datepicker")||"true"==(0,i.default)(this).attr("data-date-datepicker"),timepicker:void 0===(0,i.default)(this).attr("data-date-timepicker")||"true"==(0,i.default)(this).attr("data-date-timepicker"),onClose:function(e,t){t.blur()}})}))},init_formatting_els:function(){var e=this;this.$el.find(".llms-input-formatting[data-formatting]").each((function(){var t=(0,i.default)(this).attr("data-formatting").split(","),n=(0,i.default)(this).attr("data-attribute"),s=new Quill(this,{modules:{toolbar:[t],keyboard:{bindings:{tab:{key:9,handler:function(e,t){return!0}},13:{key:13,handler:function(e,t){return s.root.blur(),!1}}}}},placeholder:(0,i.default)(this).attr("data-placeholder"),theme:"bubble"});s.on("text-change",(function(t,o,l){e.model.set(n,e.get_content((0,i.default)(s.root)))})),Backbone.pubSub.trigger("formatting-ed-init",s,(0,i.default)(this),e)}))},init_selects:function(){this.$el.find(".llms-editable-select select").llmsSelect2({width:"100%"}).trigger("change")},on_blur:function(e){e.stopPropagation(),this.model.set("_has_focus",!1,{silent:!0}),(0,i.default)(e.target),this.has_changed(e)&&(this.is_valid(e)?this.save_edits(e):this.revert_edits(e))},on_focus:function(e){e.stopPropagation(),this.model.set("_has_focus",!0,{silent:!0})},on_paste:function(e){e.preventDefault(),e.stopPropagation();var t=(e.originalEvent||e).clipboardData.getData("text/plain");window.document.execCommand("insertText",!1,t)},on_select:function(e){var t,n=(0,i.default)(e.target),s=n.attr("multiple"),o=n.attr("name"),l=n.find("option:selected");s?(t=[],t=l.map((function(){return this.value})).get()):t=l[0].value,this.model.set(o,t)},on_radio_select:function(e){var t=(0,i.default)(e.target),n=t.attr("name"),s=t.val();this.model.set(n,s)},on_keydown:function(e){e.stopPropagation();var t=e.which||e.keyCode,i=e.shiftKey;switch(t){case 13:i||(e.preventDefault(),e.target.blur());break;case 27:e.preventDefault(),this.revert_edits(e),e.target.blur()}},open_media_lib:function(e){e.stopPropagation();var t=this,n=(0,i.default)(e.currentTarget);t.media_lib?t.media_lib.uploader.uploader.param("post_id"):(t.media_lib=wp.media.frames.file_frame=wp.media({title:LLMS.l10n.translate("Select an image"),button:{text:LLMS.l10n.translate("Use this image")},multiple:!1}),t.media_lib.on("select",(function(){var e,i=n.attr("data-image-size"),s=t.media_lib.state().get("selection").first().toJSON(),o=t.model.get(n.attr("data-attribute"));e=i&&s.sizes[i]?s.sizes[i].url:s.url,o.set({id:s.id,src:e})}))),t.media_lib.open()},remove_image:function(e){e.preventDefault(),this.model.get((0,i.default)(e.currentTarget).attr("data-attribute")).set({id:"",src:""})},revert_edits:function(e){var t=(0,i.default)(e.target),n=t.attr("data-original-content");t.html(n)},save_edits:function(e){var t=(0,i.default)(e.target),n=this.get_content(t);this.model.set(t.attr("data-attribute"),n)},toggle_switch:function(e){e.stopPropagation();var t,n=(0,i.default)(e.target),s=n.attr("name"),o=n.attr("data-rerender");if(t=n.is(":checked")?n.attr("data-on")?n.attr("data-on"):"yes":n.attr("data-off")?n.attr("data-off"):"no",-1!==s.indexOf(".")){var l=s.split(".");"parent"===l[0]?this.model.get_parent().set(l[1],t):this.model.get(l[0]).set(l[1],t)}else this.model.set(s,t);if(this.trigger(s.replace(".","-")+"_toggle",t),!o||"yes"===o){var a=this;setTimeout((function(){a.render()}),100)}},init_editor:function(e,t){t=t||{};var n=_.getEditor();n.remove(e),n.initialize(e,i.default.extend(!0,n.getDefaultSettings(),{mediaButtons:!0,tinymce:{toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",setup:_.bind(this.on_editor_ready,this)}},t))},make_slug_editable:function(e){var t=(0,i.default)(e.currentTarget),n=t.prevAll("a"),s=t.prev("input.permalink"),o=n.attr("href"),l=s.val(),a=o.replace(l,"");t.hide(),n.css({color:"#999","pointer-events":"none","text-decoration":"none"}),n.text(a.substring(0,a.length-1)),s.show().focus()},on_editor_ready:function(e){var t=this,n=(0,i.default)("#"+e.id),s=n.closest(".llms-editable-editor"),o=s.find(".llms-label"),l=n.attr("data-attribute");o.length&&o.prependTo(s.find(".wp-editor-tools")),e.on("change",(function(i){t.model.set(l,_.getEditor().getContent(e.id))})),n.on("input",(function(e){t.model.set(l,n.val())})),s.on("click",".quicktags-toolbar .ed_button",(function(){setTimeout((function(){n.trigger("input")}),10)}))},_validate_url:function(e){var t=document.createElement("a");return t.href=e,t.host&&t.host!==window.location.host}}}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return{relationship_defaults:{parent:{},children:{}},relationships:{},init_relationships:function(e){var t=this.get_relationships();t.parent&&e&&e.parent&&this.set_parent(e.parent),_.each(t.children,(function(e,t){if(!e.conditional||!0===e.conditional(this)){var i,n=this.get(t);e.lookup?i=e.lookup(n):"model"===e.type?i=window.llms_builder.construct.get_model(e.class,n):"collection"===e.type&&(i=window.llms_builder.construct.get_collection(e.class,n)),this.set(t,i),"model"===e.type?this._maybe_set_parent_reference(i):"collection"===e.type&&(i.parent=this,i.each((function(e){this._maybe_set_parent_reference(e)}),this))}}),this)},get_child_props:function(){var e=[];return _.each(this.get_relationships().children,(function(t,i){t.conditional&&!0!==t.conditional(this)||e.push(i)}),this),e},get_parent:function(){var e=this.get_relationships();return!!e.parent&&e.parent.reference},get_relationships:function(){return i.default.extend(!0,this.relationships,this.relationship_defaults)},set_parent:function(e){this.relationships.parent.reference=e},_maybe_set_parent_reference:function(e){if(e&&e.get_relationships){var t=e.get_relationships();t.parent&&t.parent.model===this.get("type")&&e.set_parent(this)}}}}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{events:{'click a[href="#llms-detach-model"]':"detach_model"},detach_model:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=LLMS.l10n.replace("Are you sure you want to detach this %s?",{"%s":this.model.get_l10n_type()});window.confirm(t)&&(this.model.collection&&this.model.collection.remove(this.model),Backbone.pubSub.trigger("model-detached",this.model),this.trigger("model-trashed",this.model))}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{subscriptions:{},state:"",views:{},get_subview:function(e){return!!this.views[e]&&this.views[e]},events_subscribe:function(e){_.each(e,(function(e,t){this.subscriptions[t]=e,Backbone.pubSub.on(t,e,this)}),this)},events_unsubscribe:function(){_.each(this.subscriptions,(function(e,t){Backbone.pubSub.off(t,e,this),delete this.subscriptions[t]}),this)},remove_subview:function(e){var t=this.get_subview(e);t&&t.instance&&(_.isEmpty(t.instance.views)||(t.instance.events_unsubscribe(),t.instance.remove_subviews()),t.instance.off(),t.instance.off(null,null,null),t.instance.remove(),t.instance.undelegateEvents(),t.instance=null)},remove_subviews:function(){_.each(this.views,(function(e,t){this.remove_subview(t)}),this)},render_subviews:function(e){e=e||{},_.each(this.views,(function(t,i){this.state===t.state?this.render_subview(i,e):this.remove_subview(i)}),this)},render_subview:function(e,t){var i=this.get_subview(e);i&&(this.remove_subview(e),i.instance||(i.instance=new i.class(t)),i.instance.render())},set_state:function(e){return this.state=e,this}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{events:{'click a[href="#llms-trash-model"]':"trash_model"},trash_model:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=LLMS.l10n.replace("Are you sure you want to move this %s to the trash?",{"%s":this.model.get_l10n_type()});window.confirm(t)&&(this.model.collection&&this.model.collection.remove(this.model),Backbone.pubSub.trigger("model-trashed",this.model),this.trigger("model-trashed",this.model))}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{fields:[],get_edit_post_link:function(){return this.has_temp_id()?"":window.llms_builder.admin_url+"post.php?post="+this.get("id")+"&action=edit"},get_settings_fields:function(){var e=this.schema||{};return window.llms_builder.schemas.get(e,this.get("type").replace("llms_",""),this)},has_temp_id:function(){return!_.isNumber(this.get("id"))&&0===this.get("id").indexOf("temp_")},init_custom_schema:function(){var e=_.filter(this.get_settings_fields(),(function(e){return e.custom}));_.each(e,(function(e){_.each(_.flatten(e.fields),(function(e){var t=[e.attribute],i=this.get("custom");e.switch_attribute&&t.push(e.switch_attribute),_.each(t,(function(t){var n=e.attribute_prefix?e.attribute_prefix+t:t;i&&i[n]&&this.set(t,i[n][0])}),this)}),this)}),this)}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(12),i(2),i(6),i(38)],void 0===(s=function(e,t,i,n){return Backbone.Model.extend(_.defaults({relationships:{parents:{model:"section",type:"model"},children:{quiz:{class:"Quiz",conditional:function(e){return"yes"===e.get("quiz_enabled")||!_.isEmpty(e.get("quiz"))},model:"llms_quiz",type:"model"}}},schema:n,defaults:function(){return{id:_.uniqueId("temp_"),title:LLMS.l10n.translate("New Lesson"),type:"lesson",order:this.collection?this.collection.length+1:1,parent_course:window.llms_builder.course.id,parent_section:"",edit_url:"",view_url:"",content:"",audio_embed:"",has_prerequisite:"no",require_passing_grade:"yes",require_assignment_passing_grade:"yes",video_embed:"",free_lesson:"",points:1,assignment:{},assignment_enabled:"no",quiz:{},quiz_enabled:"no",_forceSync:!1}},initialize:function(){this.init_custom_schema(),this.startTracking(),this.maybe_init_assignments(),this.init_relationships();var e=this.get("quiz");_.isEmpty(e)||e.get("lesson_id")||e.set("lesson_id",this.get("id")),window.llms.hooks.doAction("llms_lesson_model_init",this)},get_course:function(){return this.get_parent().get_course()},get_l10n_type:function(e){return e?LLMS.l10n.translate("lessons"):LLMS.l10n.translate("lesson")},get_parent:function(){var e=this.get_relationships();return e.parent&&e.parent.reference?e.parent.reference:!(!this.collection||!this.collection.parent)&&this.collection.parent},get_points_percentage:function(){var e=this.get_course().get_total_points(),t=1*this.get("points");return _.isNumber(t)||(t=0),0===e?"0%":(t/e*100).toFixed(2)+"%"},get_available_prereq_options:function(){var e=this.get_parent().collection.indexOf(this.get_parent()),t=this.collection.indexOf(this),i=[];return this.get_course().get("sections").each((function(n,s){if(s<=e){var o={
// Translators: %1$d = section order number, %2$s = section title.
label:LLMS.l10n.replace("Section %1$d: %2$s",{"%1$d":n.get("order"),"%2$s":n.get("title")}),options:[]};n.get("lessons").each((function(i,n){(s!==e||n<t)&&
// Translators: %1$d = lesson order number, %2$s = lesson title.
o.options.push({key:i.get("id"),val:LLMS.l10n.replace("Lesson %1$d: %2$s",{"%1$d":i.get("order"),"%2$s":i.get("title")})})}),this),i.push(o)}}),this),i},add_quiz:function(e){(e=e||{}).lesson_id=this.id,e._questions_loaded=!0,e.title||(e.title=LLMS.l10n.replace("%1$s Quiz",{"%1$s":this.get("title")})),this.set("quiz",e),this.init_relationships();var t=this.get("quiz");return this.set("quiz_enabled","yes"),window.llms.hooks.doAction("llms_lesson_add_quiz",t,this),t},is_first_in_course:function(){if(!this.is_first_in_section())return!1;var e=this.get_parent();return!e.collection.indexOf(e)},is_last_in_course:function(){if(!this.is_last_in_section())return!1;var e=this.get_parent();return!(e.collection.indexOf(e)<e.collection.size()-1)},is_first_in_section:function(){return 0===this.collection.indexOf(this)},is_last_in_section:function(){return this.collection.indexOf(this)===this.collection.size()-1},get_prev:function(e){return this.get_sibling("prev",e)},get_next:function(e){return this.get_sibling("next",e)},get_sibling:function(e,t){var i="is_first_in_course",n=-1,s="last";if("next"===(e="next"===e?e:"prev")&&(i="is_last_in_course",n=1,s="first"),this[i]())return!1;var o=this.collection.indexOf(this)+n,l=this.collection.at(o);if(this["next"===e?"is_last_in_section":"is_first_in_section"]()){for(var a=this.get_parent()["get_"+e](!1);a&&!a.get("lessons").size();)a=a["get_"+e](!1);if(!a||!a.get("lessons").size())return!1;l=a.get("lessons")[s]()}return t&&t!==l.get("status")?l.get_sibling(e,t):l},maybe_init_assignments:function(){window.llms_builder.assignments&&(this.relationships.children.assignment={class:"Assignment",conditional:function(e){return"yes"===e.get("assignment_enabled")||!_.isEmpty(e.get("assignment"))},model:"llms_assignment",type:"model"})}},t,i))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return Backbone.View.extend({defaults:{placement:"auto",width:"auto",trigger:"manual",style:"light",animation:"pop",title:"",content:"",closeable:!1,backdrop:!1,onShow:function(e){},onHide:function(e){}},tagName:"div",initialize:function(e){this.$el.length&&(this.defaults.container=this.$el.parent()),this.args=_.defaults(e.args,this.defaults),(0,i.default)("body").hasClass("rtl")&&(-1!==this.args.placement.indexOf("left")?this.args.placement=this.args.placement.replace("left","right"):-1!==this.args.placement.indexOf("right")&&(this.args.placement=this.args.placement.replace("right","left"))),this.render()},render:function(){return this.$el.webuiPopover(this.args),this},hide:function(){return this.$el.webuiPopover("hide"),this},show:function(){return this.$el.webuiPopover("show"),this}})}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return Backbone.View.extend({events:{"select2:select":"add_post"},tagName:"select",initialize:function(e){this.post_type=e.post_type,this.searching_message=e.searching_message||LLMS.l10n.translate("Searching...")},add_post:function(e){var t=this.$el.attr("data-post-type");Backbone.pubSub.trigger(t.replace("llms_","")+"-search-select",e.params.data,e),this.$el.val(null).trigger("change")},render:function(){var e=this;return setTimeout((function(){e.$el.llmsSelect2({ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(t){return{action:"llms_builder",action_type:"search",course_id:window.llms_builder.course.id,post_type:e.post_type,term:t.term,page:t.page,_ajax_nonce:window.llms.ajax_nonce}}},dropdownParent:(0,i.default)(".wrap.lifterlms.llms-builder"),escapeMarkup:function(e){return e},placeholder:e.searching_message,templateResult:e.render_result,width:"100%"}),e.$el.attr("data-post-type",e.post_type)}),0),this},render_result:function(e){var t=(0,i.default)('<div class="llms-existing-lesson-result" />');if(e.loading)return t.append(e.text);var n=(0,i.default)('<aside class="llms-existing-action" />'),s=(0,i.default)('<div class="llms-existing-info" />'),o="attach"===e.action?"paperclip":"clone",l="attach"===e.action?LLMS.l10n.translate("Attach"):LLMS.l10n.translate("Clone");return n.append('<i class="fa fa-'+o+'" aria-hidden="true"></i><small>'+l+"</small>"),s.append("<h4>"+e.data.title+"</h4>"),s.append("<h5>"+LLMS.l10n.translate("ID")+": <em>"+e.data.id+"</em></h5>"),_.each(e.parents,(function(e){s.append("<h5>"+e+"</em></h5>")})),t.append(n).append(s),t}})}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=window._},function(e,t){e.exports=window.Backbone},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(13),i(7),i(14),i(2),i(6),i(37)],void 0===(s=function(e,t,i,n,s,o){return Backbone.Model.extend(_.defaults({relationships:{parent:{model:"lesson",type:"model"},children:{questions:{class:"Questions",model:"llms_question",type:"collection"}}},schema:o,defaults:function(){return{id:_.uniqueId("temp_"),title:LLMS.l10n.translate("New Quiz"),type:"llms_quiz",lesson_id:"",status:"draft",content:"",allowed_attempts:5,limit_attempts:"no",limit_time:"no",passing_percent:65,name:"",random_answers:"no",time_limit:30,show_correct_answer:"no",questions:[],_points:0,permalink:"",_show_settings:!1,_questions_loaded:!1}},initialize:function(){this.init_custom_schema(),this.startTracking(),this.init_relationships(),this.listenTo(this.get("questions"),"add",this.update_points),this.listenTo(this.get("questions"),"remove",this.update_points),this.set("_points",this.get_total_points()),this.on("change:status",(function(){"publish"===this.get("status")&&this.get_parent().set("quiz_enabled","yes")})),window.llms.hooks.doAction("llms_quiz_model_init",this)},add_question:function(e){e.parent_id=this.get("id");var t=this.get("questions").add(e,{parent:this});Backbone.pubSub.trigger("quiz-add-question",t,this)},get_l10n_type:function(e){return e?LLMS.l10n.translate("quizzes"):LLMS.l10n.translate("quiz")},get_total_points:function(){var e=0;return this.get("questions").each((function(t){e+=t.get_points()})),e},load_questions:function(e){if(this.get("_questions_loaded"))e();else{var t=this;LLMS.Ajax.call({data:{action:"llms_builder",action_type:"lazy_load",course_id:window.llms_builder.CourseModel.get("id"),load_id:this.get("id")},error:function(t,i,n){console.log(t,i,n),window.llms_builder.debug.log("==== start load_questions error ====",t,i,n,"==== finish load_questions error ===="),e(!0)},success:function(i){i&&i.questions?(t.set("_questions_loaded",!0),i.questions&&_.each(i.questions,t.add_question,t),e()):e(!0)}})}},update_points:function(){this.set("_points",this.get_total_points())}},n,s))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(14)],void 0===(s=function(e){return Backbone.Collection.extend({model:e,initialize:function(){this.on("reorder",this.update_order),this.on("add",this.update_order),this.on("remove",this.update_order),this.on("add",this.update_parent)},update_order:function(){var e=this;this.each((function(t){t.set("menu_order",e.indexOf(t)+1)}))},update_parent:function(e){e.set("parent_id",this.parent.get("id"))}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(15),i(13),i(22),i(16),i(2),i(6)],void 0===(s=function(e,t,i,n,s,o){return Backbone.Model.extend(_.defaults({relationships:{parent:{model:"llms_quiz",type:"model"},children:{choices:{class:"QuestionChoices",model:"choice",type:"collection"},image:{class:"Image",model:"image",type:"model"},questions:{class:"Questions",conditional:function(e){var t=e.get("question_type");return"group"===(_.isString(t)?t:t.get("id"))},model:"llms_question",type:"collection"},question_type:{class:"QuestionType",lookup:function(e){return _.isString(e)?window.llms_builder.questions.get(e):e},model:"question_type",type:"model"}}},defaults:function(){return{id:_.uniqueId("temp_"),choices:[],content:"",description_enabled:"no",image:{},multi_choices:"no",menu_order:1,points:1,question_type:"generic",questions:[],parent_id:"",title:"",type:"llms_question",video_enabled:"no",video_src:"",_expanded:!1}},initialize:function(e,t){var i=this;this.startTracking(),this.init_relationships(t),!1!==this.get("question_type").choices&&(this._ensure_min_choices(),this.listenTo(this.get("choices"),"remove",(function(){setTimeout((function(){i._ensure_min_choices()}),0)}))),this.get("question_type").get("points")||this.set("points",0),_.delay((function(e){e.on("change:points",e.get_parent().update_points,e.get_parent())}),1,this)},add_choice:function(e,t){var i=this.get("question_type").get_max_choices();if(!(this.get("choices").size()>=i)){t=t||{},(e=e||{}).choice_type=this.get("question_type").get_choice_type(),e.question_id=this.get("id"),t.parent=this;var n=this.get("choices").add(e,t);Backbone.pubSub.trigger("question-add-choice",n,this)}},before_save:function(e,t){return"full"===t&&(e.question_type=this.get("question_type").get("id")),e},get_parent:function(){var e=this.get_relationships();if(e.parent){if(this.collection&&this.collection.parent)return this.collection.parent;if(e.parent.reference)return e.parent.reference}return!1},get_l10n_type:function(e){return e?LLMS.l10n.translate("questions"):LLMS.l10n.translate("question")},get_type_index:function(){var e=this.get("question_type").get("id");return this.collection.filter((function(t){var i=t.get("question_type").get("id");return"content"!==e?"content"!==i:"content"===i})).indexOf(this)},get_type_iterator:function(){var e=this.get_type_index();return-1===e?"":"content"===this.get("question_type").get("id")?"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")[e]:e+1},get_qid:function(){var e=this.get_parent_question(),t="";return e&&(t=e.get_qid()+"."),t+this.get_type_iterator()},get_parent_question:function(){return!!this.is_in_group()&&this.collection.parent},get_parent_quiz:function(){return this.get_parent()},get_points:function(){return this.get("question_type").get("points")?this.get("points"):0},get_points_percentage:function(){var e=this.get_parent().get("_points"),t=this.get("points");return 0===e?"0%":(t/e*100).toFixed(2)+"%"},is_in_group:function(){return"question"===this.collection.parent.get("type")},_ensure_min_choices:function(){for(var e=this.get("choices");e.size()<this.get("question_type").get_min_choices();)this.add_choice()}},s,o))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return Backbone.Model.extend({defaults:{enabled:"no",id:"",size:"full",src:""},initialize:function(){this.startTracking()}})}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return Backbone.Model.extend({defaults:function(){return{choices:!1,clarifications:!0,default_choices:[],description:!0,icon:"question",id:"generic",image:!0,keywords:[],name:"Generic",placeholder:"",points:!0,video:!0}},get_keywords:function(){var e=this.get("name");return[e].concat(this.get("keywords")).concat(e.split(" "))},get_choice_markers:function(){return this._get_choice_option("markers")},get_choice_selectable:function(){return this._get_choice_option("selectable")},get_choice_type:function(){return this._get_choice_option("type")},get_min_choices:function(){return this._get_choice_option("min")},get_max_choices:function(){return this._get_choice_option("max")},get_multi_choices:function(){return!!this.get("choices")&&this._get_choice_option("multi")},_get_choice_option:function(e){var t=this.get("choices");return!(!t||!t[e])&&t[e]}})}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(21),i(2)],void 0===(s=function(e,t){return Backbone.Model.extend(_.defaults({relationships:{parent:{model:"course",type:"model"},children:{lessons:{class:"Lessons",model:"lesson",type:"collection"}}},defaults:function(){return{id:_.uniqueId("temp_"),lessons:[],order:this.collection?this.collection.length+1:1,parent_course:window.llms_builder.course.id,title:LLMS.l10n.translate("New Section"),type:"section",_expanded:!1,_selected:!1}},initialize:function(){this.startTracking(),this.init_relationships()},add_lesson:function(e,t){return t=t||{},(e=e||{})instanceof Backbone.Model?(e.set("parent_section",this.get("id")),e.set_parent(this)):e.parent_section=this.get("id"),this.get("lessons").add(e,t)},get_l10n_type:function(e){return e?LLMS.l10n.translate("sections"):LLMS.l10n.translate("section")},get_next:function(e){return this._get_sibling("next",e)},get_course:function(){return this.get_parent()||this.set_parent(window.llms_builder.CourseModel),this.get_parent()},get_prev:function(e){return this._get_sibling("prev",e)},_get_sibling:function(e,t){t="undefined"===t||t;var i,n=this.collection.size()-1,s=this.collection.indexOf(this);if("next"===e?i=s+1:"prev"===e&&(i=s-1),i<=n||i>=0)return this.collection.at(i);if(t){if("next"===e)return this.collection.first();if("prev"===e)return this.collection.last()}return!1}},t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{_receive:function(e,t){if(t.sender.hasClass("ui-draggable")){var i=this._getContainerEl().children().index(t.helper);return t.helper.remove(),void this.collection.add({},{at:i})}var n=t.sender.data("view");if(n&&n.collection){var s=this._getContainerEl().children().index(t.item),o=n.collection.get(t.item.attr("data-model-cid"));n.collection.remove(o),this.collection.add(o,{at:s}),o.collection=this.collection,this.setSelectedModel(o)}}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return{maybe_hide_shiftable_buttons:function(){if(this.model.collection){var e=this.model.get("type");this.model.collection.first()===this.model?this.$el.find(".shift-up--"+e).hide():this.model.collection.last()===this.model&&this.$el.find(".shift-down--"+e).hide()}},shift:function(e,t){var i=this.model.collection;i.remove(this.model),i.add(this.model,{at:t}),i.trigger("reorder")},shift_down:function(e){e.preventDefault();var t=this.model.collection.indexOf(this.model);this.shift(t,t+1)},shift_up:function(e){e.preventDefault();var t=this.model.collection.indexOf(this.model);this.shift(t,t-1)}}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return Backbone.View.extend(_.defaults({events:{"click .llms-settings-group-toggle":"toggle_group"},fields:{},tagName:"div",template:wp.template("llms-settings-fields-template"),get_editor_fields:function(){return _.filter(this.fields,(function(e){return this.is_editor_field(e.type)}),this)},get_groups:function(){return this.model.get_settings_fields()},is_group_hidden:function(e){var t="llms-"+this.model.get("type")+"-settings-group--"+e;return"undefined"!==window.localStorage&&"hidden"===window.localStorage.getItem(t)},get_switch_attribute:function(e){return e.switch_attribute?e.switch_attribute:e.attribute},has_switch:function(e){return-1!==e.indexOf("switch")},is_default_field:function(e){return-1!==["audio_embed","datepicker","number","text","video_embed"].indexOf(e.replace("switch-",""))},is_editor_field:function(e){return-1!==["editor","switch-editor"].indexOf(e.replace("switch-",""))},is_switch_condition_met:function(e){return e.switch_on===this.model.get(e.switch_attribute)},render:function(){return this.$el.html(this.template(this)),_.each(this.get_editor_fields(),(function(e){this.render_editor(e)}),this),this},render_editor:function(e){var t=this,n=_.getEditor();void 0!==n?(n.remove(e.id),e.settings.tinymce.setup=function(e){var s=(0,i.default)("#"+e.id),o=s.closest(".llms-editable-editor"),l=o.find(".llms-label"),a=s.attr("data-attribute");l.length&&l.prependTo(o.find(".wp-editor-tools")),e.on("change",(function(i){t.model.set(a,n.getContent(e.id))})),s.on("input",(function(e){t.model.set(a,s.val())})),o.on("click",".quicktags-toolbar .ed_button",(function(){setTimeout((function(){s.trigger("input")}),10)}))},n.initialize(e.id,e.settings)):console.error("Unable to access `wp.oldEditor` or `wp.editor`.")},render_select_options:function(e,t){var i="",n=this.model.get(t);function s(e,t){return'<option value="'+t+'"'+_.selected(t,n)+">"+e+"</option>"}return _.each(e,(function(e,n){"string"==typeof e?i+=s(e,n):"object"===l(e)&&(e.label&&e.options?(i+='<optgroup label="'+e.label+'">',i+=this.render_select_options(e.options,t)):i+=s(e.val,e.key))}),this),i},setup_field:function(e,t){var n={classes:[],id:_.uniqueId(e.attribute+"_"),input_type:"text",label:"",options:{},placeholder:"",tip:"",tip_position:"top-right",settings:{}};if(e.condition&&!1===_.bind(e.condition,this.model)())return!1;switch(e.type){case"audio_embed":n.classes.push("llms-editable-audio"),n.placeholder="https://",n.tip=LLMS.l10n.translate("Use SoundCloud or Spotify audio URLS."),n.input_type="url";break;case"datepicker":n.classes.push("llms-editable-date");break;case"editor":case"switch-editor":var s=e.settings||{};n.settings=i.default.extend(!0,_.getEditor().getDefaultSettings(),{mediaButtons:!0,tinymce:{toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help"}},s);break;case"number":case"switch-number":n.input_type="number";break;case"permalink":n.label=LLMS.l10n.translate("Permalink");break;case"video_embed":n.classes.push("llms-editable-video"),n.placeholder="https://",n.tip=LLMS.l10n.translate("Use YouTube, Vimeo, or Wistia video URLS."),n.input_type="url"}this.has_switch(e.type)&&(n.switch_on="yes",n.switch_off="no");var o=_.defaults(_.deepClone(e),n);if(_.isFunction(o.options)&&(o.options=_.bind(o.options,this.model)()),-1!==["radio","switch-radio"].indexOf(e.type)){var l=!1;_.each(e.options,(function(e,t){-1===e.indexOf(".png")&&-1===e.indexOf(".jpg")||(o.options[t]='<span><img src="'+e+'"></span>',l=!0)})),l&&o.classes.push("has-images")}return o.classes.length&&(o.classes=" "+o.classes.join(" ")),this.fields[o.id]=o,o},should_rerender_on_toggle:function(e){return-1!==e.indexOf("switch-")?"yes":"no"},toggle_group:function(e){e.preventDefault();var t=(0,i.default)(e.currentTarget).closest(".llms-model-settings");if(t.toggleClass("hidden"),"undefined"!==window.localStorage){var n=t.attr("id");t.hasClass("hidden")?window.localStorage.setItem(n,"hidden"):window.localStorage.removeItem(n)}}}))}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(7)],void 0===(s=function(e){return Backbone.Collection.extend({model:e,initialize:function(){this.on("reorder",this.on_reorder),this.on("add",this.on_reorder),this.on("remove",this.on_reorder)},on_reorder:function(){this.update_order(),this.validate_prereqs()},update_order:function(){this.each((function(e){e.set("order",this.indexOf(e)+1)}),this)},validate_prereqs:function(){this.each((function(e){"yes"===e.get("has_prerequisite")&&-1===_.pluck(_.flatten(_.pluck(e.get_available_prereq_options(),"options")),"key").indexOf(1*e.get("prerequisite"))&&e.set({prerequisite:0,has_prerequisite:"no"})}),this)}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(23)],void 0===(s=function(e){return Backbone.Collection.extend({model:e,initialize:function(){this.on("reorder",this.update_order),this.on("add",this.update_order),this.on("remove",this.update_order),this.on("add",this.update_correct),this.on("remove",this.update_correct),this.on("correct-update",this.update_correct)},count_correct:function(){return _.size(this.get_correct())},get_correct:function(){return this.filter((function(e){return e.get("correct")}))},update_correct:function(e){if(this.parent.get("question_type").get_choice_selectable()){var t=this.without(e),i=this.parent;if("no"===i.get("multi_choices")&&_.each(t,(function(e){e.set("correct",!1)})),0===this.count_correct()&&i.get("points")>0){var n=1===this.size()?this.models:t;_.first(n).set("correct",!0)}}},update_order:function(){var e=this,t=this.parent;this.each((function(i){i.set("marker",t.get("question_type").get_choice_markers()[e.indexOf(i)])}))}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(15),i(2)],void 0===(s=function(e,t){return Backbone.Model.extend(_.defaults({relationships:{parent:{model:"llms_question",type:"model"},children:{choice:{conditional:function(e){return"image"===e.get("choice_type")},class:"Image",model:"image",type:"model"}}},defaults:function(){return{id:_.uniqueId("temp_"),choice:"",choice_type:"text",correct:!1,marker:"A",question_id:"",type:"choice"}},initialize:function(e,t){this.startTracking(),this.init_relationships(t)},get_parent:function(){return this.collection.parent},get_trash_id:function(){return this.get("question_id")+":"+this.get("id")},is_selectable:function(){return this.get_parent().get("question_type").get_choice_selectable()}},t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(17)],void 0===(s=function(e){return Backbone.Collection.extend({model:e,initialize:function(){this.on("reorder",this.update_order),this.on("add",this.update_order),this.on("remove",this.update_order)},update_order:function(){var e=this;this.each((function(t){t.set("order",e.indexOf(t)+1)}))}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(40),i(41),i(15),i(7),i(14),i(23),i(16),i(12),i(17)],void 0===(s=function(e,t,i,n,s,o,l,a,r){return{Abstract:e,Course:t,Image:i,Lesson:n,Question:s,QuestionChoice:o,QuestionType:l,Quiz:a,Section:r}}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(48),i(1),i(19),i(5)],void 0===(s=function(e,t,i,n){return Backbone.View.extend(_.defaults({attributes:function(){return{"data-id":this.model.id}},className:"llms-builder-item llms-section",events:_.defaults({click:"select","click .expand":"expand","click .collapse":"collapse","click .shift-up--section":"shift_up","click .shift-down--section":"shift_down","mouseenter .llms-lessons":"on_mouseenter"},t.events,n.events),id:function(){return"llms-section-"+this.model.id},tagName:"li",template:wp.template("llms-section-template"),initialize:function(){this.render(),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:_expanded",this.toggle_expanded),this.lessonListView.collection.on("add",this.on_lesson_add,this),this.dragTimeout=null,Backbone.pubSub.on("expand-all",this.expand,this),Backbone.pubSub.on("collapse-all",this.collapse,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.maybe_hide_shiftable_buttons(),this.lessonListView=new e({el:this.$el.find(".llms-lessons"),collection:this.model.get("lessons")}),this.lessonListView.render(),this.lessonListView.on("sortStart",this.lessonListView.sortable_start),this.lessonListView.on("sortStop",this.lessonListView.sortable_stop),this.lessonListView.on("selectionChanged",this.active_lesson_change,this),this.maybe_hide_trash_button(),this},active_lesson_change:function(e,t){Backbone.pubSub.trigger("active-lesson-change",{current:e,previous:t})},collapse:function(e,t){void 0===t&&(t=!0),e&&(e.stopPropagation(),e.preventDefault()),this.$el.removeClass("expanded").find(".drag-expanded").removeClass("drag-expanded"),t&&this.model.set("_expanded",!1),Backbone.pubSub.trigger("section-toggle",this.model)},expand:function(e,t){void 0===t&&(t=!0),e&&(e.stopPropagation(),e.preventDefault()),this.$el.addClass("expanded"),t&&this.model.set("_expanded",!0),Backbone.pubSub.trigger("section-toggle",this.model)},maybe_hide_trash_button:function(){var e=this.$el.find(".trash--section");this.model.get("lessons").isEmpty()?e.show():e.hide()},on_lesson_add:function(e){this.lessonListView.collection.trigger("reorder"),e.set("parent_section",this.model.get("id")),this.expand()},on_mouseenter:function(e){(0,o.default)(e.target).hasClass("dragging")&&((0,o.default)(".drag-expanded").removeClass("drag-expanded"),(0,o.default)(e.target).addClass("drag-expanded"))},toggle_expanded:function(e,t){t?this.expand(null,!1):this.collapse(null,!1)}},t,i,n))}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(3),i(1),i(19),i(5)],void 0===(s=function(e,t,i,n){return Backbone.View.extend(_.defaults({attributes:function(){return{"data-id":this.model.id,"data-section-id":this.model.get("parent_section")}},className:"llms-builder-item llms-lesson",events:_.defaults({"click .edit-lesson":"open_lesson_editor","click .edit-quiz":"open_quiz_editor","click .edit-assignment":"open_assignment_editor","click .section-prev":"section_prev","click .section-next":"section_next","click .shift-up--lesson":"shift_up","click .shift-down--lesson":"shift_down"},e.events,t.events,n.events),id:function(){return"llms-lesson-"+this.model.id},tagName:"li",template:wp.template("llms-lesson-template"),initialize:function(){this.render(),this.listenTo(this.model,"change",this.render),Backbone.pubSub.on("lesson-selected",this.on_select,this),Backbone.pubSub.on("new-lesson-added",this.on_select,this)},render:function(){return this.$el.html(this.template(this.model)),this.maybe_hide_shiftable_buttons(),this.model.get("_selected")?this.$el.addClass("selected"):this.$el.removeClass("selected"),this},open_assignment_editor:function(e){e&&e.preventDefault(),Backbone.pubSub.trigger("lesson-selected",this.model,"assignment"),this.model.set("_selected",!0),this.set_hash("assignment")},open_lesson_editor:function(e){e&&e.preventDefault(),Backbone.pubSub.trigger("lesson-selected",this.model,"lesson"),this.model.set("_selected",!0),this.set_hash(!1)},open_quiz_editor:function(e){e&&e.preventDefault(),Backbone.pubSub.trigger("lesson-selected",this.model,"quiz"),this.model.set("_selected",!0),this.set_hash("quiz")},on_select:function(e){this.model.id!==e.id&&this.model.set("_selected",!1)},section_next:function(e){e.preventDefault(),this._move_to_section("next")},section_prev:function(e){e.preventDefault(),this._move_to_section("prev")},set_hash:function(e){var t="lesson:"+this.model.get("id");e&&(t+=":"+e),window.location.hash=t},_move_to_section:function(e){var t,i=this.model.collection;"next"===e?t=i.parent.get_next():"prev"===e&&(t=i.parent.get_prev()),t&&(i.remove(this.model),t.add_lesson(this.model),t.set("_expanded",!0))}},e,t,i,n))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(29),i(30)],void 0===(s=function(e,t){}.apply(t,n))||(e.exports=s)},function(e,t,i){"use strict";i.r(t)},function(e,t,i){var n,s;n=[i(0),i(10),i(11)],void 0===(s=function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}e=s(e),t=s(t),n=s(n),Promise.resolve().then((function(){var s=[i(31),i(33),i(34),i(35),i(43),i(44),i(45),i(25),i(46),i(49)];(function(i,s,o,l,a,r,c,d,u,h){function p(e,i){return t.default.isArray(i)&&-1!==i.indexOf(e)||e==i}window.llms_builder.debug=new a(window.llms_builder.debug),window.llms_builder.construct=new l,window.llms_builder.schemas=new r(window.llms_builder.schemas),t.default.mixin({checked:function(e,t){return p(e,t)?' checked="checked"':""},deepClone:function(e){var i=t.default.clone(e);return t.default.each(i,(function(e,n){!t.default.isFunction(e)&&t.default.isObject(e)&&(i[n]=t.default.deepClone(e))})),i},getEditor:function(){if(void 0!==wp.oldEditor){var e=wp.oldEditor;return void 0!==wp.editor&&void 0!==wp.editor.getDefaultSettings&&(e.getDefaultSettings=wp.editor.getDefaultSettings),e}if(void 0!==wp.editor&&void 0!==wp.editor.autop)return wp.editor},prepareQuizObjectForCloning:function(e){return delete e.id,delete e.lesson_id,t.default.each(e.questions,(function(e){e=t.default.prepareQuestionObjectForCloning(e)})),e},prepareQuestionObjectForCloning:function(e){return delete e.id,delete e.parent_id,e.image&&t.default.isObject(e.image)&&(e.image._forceSync=!0),e.choices&&t.default.each(e.choices,(function(e){delete e.question_id,delete e.id,"image"===e.choice_type&&t.default.isObject(e.choice)&&(e.choice._forceSync=!0)})),e},selected:function(e,t){return p(e,t)?' selected="selected"':""},stripFormatting:function(t,i){i||(i=["b","i","u","strong","em"]);var n=(0,e.default)("<div>"+t+"</div>");return n.find("*").not(i.join(",")).each((function(){(0,e.default)(this).replaceWith(this.innerHTML)})),n.html()}}),n.default.pubSub=t.default.extend({},n.default.Events),(0,e.default)(document).trigger("llms-builder-pre-init"),window.llms_builder.questions=window.llms_builder.construct.get_collection("QuestionTypes",window.llms_builder.questions);var _=window.llms_builder.construct.get_model("Course",window.llms_builder.course);window.llms_builder.CourseModel=_,window.llms_builder.sync=new c(_,window.llms_builder.sync);var f=new u({model:_}),m=new h({CourseView:f});if((0,e.default)(document).trigger("llms-builder-init",{course:f,sidebar:m}),window.location.hash){var g=window.location.hash;if(-1===g.indexOf("#lesson:"))return;var b=g.replace("#lesson:","").split(":"),v=(0,e.default)("#llms-lesson-"+b[0]);v.length&&LLMS.wait_for((function(){return void 0!==t.default.getEditor()&&void 0!==window.tinymce}),(function(){v.closest(".llms-builder-item.llms-section").find("a.llms-action-icon.expand").trigger("click");var t=b[1]?b[1]:"lesson";(0,e.default)("#llms-lesson-"+b[0]).find("a.llms-action-icon.edit-"+t).trigger("click")}))}}).apply(null,s)})).catch(i.oe)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=[i(32)],void 0===(s=function(e){"use strict";function t(e){if("function"!=typeof WeakMap)return null;var i=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:i})(e)}e=function(e,i){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=t(void 0);if(n&&n.has(e))return n.get(e);var s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=l?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e),window.llms=window.llms||{},window.llms.hooks=e}.apply(t,n))||(e.exports=s)},function(e,t){e.exports=window.wp.hooks},function(e,t,i){var n,s,o;s=[i(11),i(10)],void 0===(o=function(l,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}l=r(l),a=r(a),s=[i(10),i(11),i(0)],void 0===(o="function"==typeof(n=function(e,t,i){var n=t.View,s=["collection","modelView","modelViewOptions","itemTemplate","itemTemplateFunction","detachedRendering"],o={background:"transparent",border:"none","box-shadow":"none"};function l(t){var i={};if(!e.isArray(t))throw new Error("Option declarations must be an array.");return e.each(t,(function(t){var n,s,o;if(s=!1,o=void 0,e.isString(t))n=t;else{if(!e.isObject(t))throw new Error("Each element in the option declarations array must be either a string or an object.");n=e.first(e.keys(t)),o=e.isFunction(t[n])?t[n]:e.clone(t[n])}"!"===n[n.length-1]&&(s=!0,n=n.slice(0,n.length-1)),i[n]=i[n]||{},i[n].required=s,e.isUndefined(o)||(i[n].defaultValue=o)})),i}t.CollectionView=t.View.extend({tagName:"ul",events:{"mousedown > li, tbody > tr > td":"_listItem_onMousedown","dblclick > li, tbody > tr > td":"_listItem_onDoubleClick",click:"_listBackground_onClick","click ul.collection-view, table.collection-view":"_listBackground_onClick",keydown:"_onKeydown"},spawnMessages:{focus:"focus"},passMessages:{"*":"."},initializationOptions:[{collection:null},{modelView:null},{modelViewOptions:{}},{itemTemplate:null},{itemTemplateFunction:null},{selectable:!0},{clickToSelect:!0},{selectableModelsFilter:null},{visibleModelsFilter:null},{sortableModelsFilter:null},{selectMultiple:!1},{clickToToggle:!1},{processKeyEvents:!0},{sortable:!1},{sortableOptions:null},{reuseModelViews:!0},{detachedRendering:!1},{emptyListCaption:null}],initialize:function(e){t.ViewOptions.add(this,"initializationOptions"),this.setOptions(e),this.collection||(this.collection=new t.Collection),this._hasBeenRendered=!1,this._isBackboneCourierAvailable()&&t.Courier.add(this),this.$el.data("view",this),this.$el.addClass("collection-view collection-list"),this.selectable&&this.$el.addClass("selectable"),this.selectable&&this.processKeyEvents&&this.$el.attr("tabindex",0),this.selectedItems=[],this._updateItemTemplate(),this.collection&&this._registerCollectionEvents(),this.viewManager=new a},_onOptionsChanged:function(t,i){var n=this,o=!1;e.each(e.keys(t),(function(l){var a=t[l],r=i[l];switch(l){case"collection":a!==r&&(n.stopListening(r),n._registerCollectionEvents());break;case"selectMultiple":!a&&n.selectedItems.length>1&&n.setSelectedModel(e.first(n.selectedItems),{by:"cid"});break;case"selectable":!a&&n.selectedItems.length>0&&n.setSelectedModels([]),a&&this.processKeyEvents?n.$el.attr("tabindex",0):n.$el.removeAttr("tabindex",0);break;case"sortable":t.sortable?n._setupSortable():n.$el.sortable("destroy");break;case"selectableModelsFilter":n.reapplyFilter("selectableModels");break;case"sortableOptions":n.$el.sortable("destroy"),n._setupSortable();break;case"sortableModelsFilter":n.reapplyFilter("sortableModels");break;case"visibleModelsFilter":n.reapplyFilter("visibleModels");break;case"itemTemplate":n._updateItemTemplate();break;case"processKeyEvents":a&&this.selectable?n.$el.attr("tabindex",0):n.$el.removeAttr("tabindex",0);break;case"modelView":n.viewManager.each((function(e){n.viewManager.remove(e),e.remove()}))}e.contains(s,l)&&(o=!0)})),this._hasBeenRendered&&o&&this.render()},setOption:function(e,t){var i={};i[e]=t,this.setOptions(i)},getSelectedModel:function(t){return this.selectedItems.length?e.first(this.getSelectedModels(t)):null},getSelectedModels:function(t){var n=this,s=(t=e.extend({},{by:"model"},t)).by,o=[];switch(s){case"id":e.each(this.selectedItems,(function(e){o.push(n.collection.get(e).id)}));break;case"cid":o=o.concat(this.selectedItems);break;case"offset":var l=0;this._getVisibleItemEls().each((function(){i(this).is(".selected")&&o.push(l),l++}));break;case"model":e.each(this.selectedItems,(function(e){o.push(n.collection.get(e))}));break;case"view":e.each(this.selectedItems,(function(e){o.push(n.viewManager.findByModel(n.collection.get(e)))}));break;default:throw new Error("Invalid referenceBy option: "+s)}return o},setSelectedModels:function(t,n){if(!e.isArray(t))throw"Invalid parameter value";if(this.selectable||!(t.length>0)){var s=(n=e.extend({},{silent:!1,by:"model"},n)).by,o=[];switch(s){case"cid":o=t;break;case"id":this.collection.each((function(i){e.contains(t,i.id)&&o.push(i.cid)}));break;case"model":o=e.pluck(t,"cid");break;case"view":e.each(t,(function(e){o.push(e.model.cid)}));break;case"offset":var l=0;this._getVisibleItemEls().each((function(){var n=i(this);e.contains(t,l)&&o.push(n.attr("data-model-cid")),l++}));break;default:throw new Error("Invalid referenceBy option: "+s)}var a=this.getSelectedModels(),r=e.clone(this.selectedItems);this.selectedItems=this._convertStringsToInts(o),this._validateSelection();var c=this.getSelectedModels();this._containSameElements(r,this.selectedItems)||(this._addSelectedClassToSelectedItems(r),n.silent||(this._isBackboneCourierAvailable()?this.spawn("selectionChanged",{selectedModels:c,oldSelectedModels:a}):this.trigger("selectionChanged",c,a)),this.updateDependentControls())}},setSelectedModel:function(e,t){e||0===e?this.setSelectedModels([e],t):this.setSelectedModels([],t)},getView:function(t,n){switch((n=e.extend({},{by:"model"},n)).by){case"id":case"cid":var s=this.collection.get(t)||null;return s&&this.viewManager.findByModel(s);case"offset":var o=this._getVisibleItemEls();return i(o.get(t));case"model":return this.viewManager.findByModel(t);default:throw new Error("Invalid referenceBy option: "+referenceBy)}},render:function(){var t;this._hasBeenRendered=!0,this.selectable&&this._saveSelection(),t=this._getContainerEl();var i,n=this.viewManager;this.viewManager=new a,n.each((function(e){this.reuseModelViews&&this.collection.get(e.model.cid)?e.$el.detach():e.remove()}),this),t.empty(),this.detachedRendering&&(i=document.createDocumentFragment()),this.collection.each((function(s){var o=n.findByModelCid(s.cid);this.reuseModelViews&&!e.isUndefined(o)||(o=this._createNewModelView(s,this._getModelViewOptions(s))),this._insertAndRenderModelView(o,i||t)}),this),this.detachedRendering&&t.append(i),this.sortable&&this._setupSortable(),this._showEmptyListCaptionIfAppropriate(),this._isBackboneCourierAvailable()?this.spawn("render"):this.trigger("render"),this.selectable&&(this._restoreSelection(),this.updateDependentControls()),this.forceRerenderOnNextSortEvent=!1},_showEmptyListCaptionIfAppropriate:function(){if(this._removeEmptyListCaption(),this.emptyListCaption&&0===this._getVisibleItemEls().length){var t,n;t=e.isFunction(this.emptyListCaption)?this.emptyListCaption():this.emptyListCaption;var s=i("<var class='empty-list-caption'>"+t+"</var>");n=this._isRenderedAsList()?s.wrapAll("<li class='not-sortable'></li>").parent().css(o):s.wrapAll("<tr class='not-sortable'><td colspan='1000'></td></tr>").parent().parent().css(o),this._getContainerEl().append(n)}},_removeEmptyListCaption:function(){this._isRenderedAsList()?this._getContainerEl().find("> li > var.empty-list-caption").parent().remove():this._getContainerEl().find("> tr > td > var.empty-list-caption").parent().parent().remove()},_insertAndRenderModelView:function(t,i,n){var s=this._wrapModelView(t);if(11===i.nodeType)i.appendChild(s.get(0));else{var o=i.children().length;!e.isUndefined(n)&&n>=0&&n<o?i.children().eq(n).before(s):(!e.isUndefined(n)&&n>o&&(this.forceRerenderOnNextSortEvent=!0),i.append(s))}this.viewManager.add(t),!1===t.render()&&(s.hide(),s.addClass("not-visible"));var l=!1;e.isFunction(this.visibleModelsFilter)&&(l=!this.visibleModelsFilter(t.model)),1===s.children().length?s.toggle(!l):t.$el.toggle(!l),s.toggleClass("not-visible",l),!l&&this.emptyListCaption&&this._removeEmptyListCaption()},updateDependentControls:function(){this._isBackboneCourierAvailable()?this.spawn("updateDependentControls",{selectedModels:this.getSelectedModels()}):this.trigger("updateDependentControls",this.getSelectedModels())},remove:function(){this.viewManager.each((function(e){e.remove()})),t.View.prototype.remove.apply(this,arguments)},reapplyFilter:function(t){var i=this;if(!e.contains(["selectableModels","sortableModels","visibleModels"],t))throw new Error("Invalid filter identifier supplied to reapplyFilter: "+t);switch(t){case"visibleModels":i.viewManager.each((function(e){var t=i.visibleModelsFilter&&!i.visibleModelsFilter.call(i,e.model);e.$el.toggleClass("not-visible",t),i._modelViewHasWrapperLI(e)?e.$el.closest("li").toggleClass("not-visible",t).toggle(!t):e.$el.toggle(!t)})),this._showEmptyListCaptionIfAppropriate();break;case"sortableModels":i.$el.sortable("destroy"),i.viewManager.each((function(e){var t=i.sortableModelsFilter&&!i.sortableModelsFilter.call(i,e.model);e.$el.toggleClass("not-sortable",t),i._modelViewHasWrapperLI(e)&&e.$el.closest("li").toggleClass("not-sortable",t)})),i._setupSortable();break;case"selectableModels":i.viewManager.each((function(e){var t=i.selectableModelsFilter&&!i.selectableModelsFilter.call(i,e.model);e.$el.toggleClass("not-selectable",t),i._modelViewHasWrapperLI(e)&&e.$el.closest("li").toggleClass("not-selectable",t)})),i._validateSelection()}},_removeModelView:function(e){this.selectable&&this._saveSelection(),this.viewManager.remove(e),this._modelViewHasWrapperLI(e)&&e.$el.parent().remove(),e.remove(),this.selectable&&this._restoreSelection(),this._showEmptyListCaptionIfAppropriate()},_validateSelectionAndRender:function(){this._validateSelection(),this.render()},_registerCollectionEvents:function(){this.listenTo(this.collection,"add",(function(e){var t;this._hasBeenRendered&&(t=this._createNewModelView(e,this._getModelViewOptions(e)),this._insertAndRenderModelView(t,this._getContainerEl(),this.collection.indexOf(e))),this._isBackboneCourierAvailable()?this.spawn("add",t):this.trigger("add",t)})),this.listenTo(this.collection,"remove",(function(e){var t;this._hasBeenRendered&&(t=this.viewManager.findByModelCid(e.cid),this._removeModelView(t)),this._isBackboneCourierAvailable()?this.spawn("remove"):this.trigger("remove")})),this.listenTo(this.collection,"reset",(function(){this._hasBeenRendered&&this.render(),this._isBackboneCourierAvailable()?this.spawn("reset"):this.trigger("reset")})),this.listenTo(this.collection,"sort",(function(e,t){this._hasBeenRendered&&(!0!==t.add||this.forceRerenderOnNextSortEvent)&&this.render(),this._isBackboneCourierAvailable()?this.spawn("sort"):this.trigger("sort")}))},_getContainerEl:function(){if(this._isRenderedAsTable()){var e=this.$el.find("> tbody");if(e.length>0)return e}return this.$el},_getClickedItemId:function(e){var t=null,n=i(e.currentTarget);if(n.closest(".collection-view").get(0)===this.$el.get(0)){var s=n.closest("[data-model-cid]");return s.length>0&&(t=s.attr("data-model-cid"),i.isNumeric(t)&&(t=parseInt(t,10))),t}},_updateItemTemplate:function(){var t;if(this.itemTemplate){if(0===i(this.itemTemplate).length)throw"Could not find item template from selector: "+this.itemTemplate;t=i(this.itemTemplate).html()}else t=this.$(".item-template").html();t&&(this.itemTemplateFunction=e.template(t))},_validateSelection:function(){var t=e.pluck(this.collection.models,"cid");this.selectedItems=e.intersection(t,this.selectedItems),e.isFunction(this.selectableModelsFilter)&&(this.selectedItems=e.filter(this.selectedItems,(function(e){return this.selectableModelsFilter.call(this,this.collection.get(e))}),this))},_saveSelection:function(){if(!this.selectable)throw"Attempt to save selection on non-selectable list";this.savedSelection={items:e.clone(this.selectedItems),offset:this.getSelectedModel({by:"offset"})}},_restoreSelection:function(){if(!this.savedSelection)throw"Attempt to restore selection but no selection has been saved!";this.setSelectedModels([],{silent:!0}),this.savedSelection.items.length>0&&(this.setSelectedModels(this.savedSelection.items,{by:"cid",silent:!0}),0===this.selectedItems.length&&this.setSelectedModel(this.savedSelection.offset,{by:"offset"}),this.selectedItems.length!==this.savedSelection.items.length&&(this._isBackboneCourierAvailable()?this.spawn("selectionChanged",{selectedModels:this.getSelectedModels(),oldSelectedModels:[]}):this.trigger("selectionChanged",this.getSelectedModels(),[])))},_addSelectedClassToSelectedItems:function(t){e.isUndefined(t)&&(t=[]);var i=t;i=e.without(i,this.selectedItems),e.each(i,(function(e){this._getContainerEl().find("[data-model-cid="+e+"]").removeClass("selected"),this._isRenderedAsList()&&this._getContainerEl().find("li[data-model-cid="+e+"] > *").removeClass("selected")}),this);var n=this.selectedItems;n=e.without(n,t),e.each(n,(function(e){this._getContainerEl().find("[data-model-cid="+e+"]").addClass("selected"),this._isRenderedAsList()&&this._getContainerEl().find("li[data-model-cid="+e+"] > *").addClass("selected")}),this)},_reorderCollectionBasedOnHTML:function(){var e=this;this._getContainerEl().children().each((function(){var t=i(this).attr("data-model-cid");if(t){var n=e.collection.get(t);n&&(e.collection.remove(n,{silent:!0}),e.collection.add(n,{silent:!0,sort:!e.collection.comparator}))}})),this._isBackboneCourierAvailable()?this.spawn("reorder"):this.collection.trigger("reorder"),this.collection.comparator&&this.collection.sort()},_getModelViewConstructor:function(e){return this.modelView||n},_getModelViewOptions:function(t){var i=this.modelViewOptions;return e.isFunction(i)&&(i=i(t)),e.extend({model:t},i)},_createNewModelView:function(t,i){var n=this._getModelViewConstructor(t);if(e.isUndefined(n))throw"Could not find modelView constructor for model";var s=new n(i);return s.collectionListView=s.collectionView=this,s},_wrapModelView:function(t){var i;return this._isRenderedAsTable()?(i=t.$el,t.$el.attr("data-model-cid",t.model.cid)):this._isRenderedAsList()&&(t.$el.is("li")?(i=t.$el,t.$el.attr("data-model-cid",t.model.cid)):i=t.$el.wrapAll("<li data-model-cid='"+t.model.cid+"'></li>").parent()),e.isFunction(this.sortableModelsFilter)&&(this.sortableModelsFilter.call(this,t.model)||(i.addClass("not-sortable"),t.$el.addClass("not-selectable"))),e.isFunction(this.selectableModelsFilter)&&(this.selectableModelsFilter.call(this,t.model)||(i.addClass("not-selectable"),t.$el.addClass("not-selectable"))),i},_convertStringsToInts:function(t){return e.map(t,(function(t){if(!e.isString(t))return t;var i=parseInt(t,10);return i==t?i:t}))},_containSameElements:function(t,i){return t.length==i.length&&e.intersection(t,i).length==t.length},_isRenderedAsTable:function(){return"table"===this.$el.prop("tagName").toLowerCase()},_isRenderedAsList:function(){return!this._isRenderedAsTable()},_modelViewHasWrapperLI:function(e){return this._isRenderedAsList()&&!e.$el.is("li")},_getVisibleItemEls:function(){return this._getContainerEl().find("> [data-model-cid]:not(.not-visible)")},_charCodes:{upArrow:38,downArrow:40},_isBackboneCourierAvailable:function(){return!e.isUndefined(t.Courier)},_setupSortable:function(){var t=e.extend({axis:"y",distance:10,forcePlaceholderSize:!0,items:this._isRenderedAsTable()?"> tbody > tr:not(.not-sortable)":"> li:not(.not-sortable)",start:e.bind(this._sortStart,this),change:e.bind(this._sortChange,this),stop:e.bind(this._sortStop,this),receive:e.bind(this._receive,this),over:e.bind(this._over,this)},e.result(this,"sortableOptions"));this.$el=this.$el.sortable(t)},_sortStart:function(e,t){var i=this.collection.get(t.item.attr("data-model-cid"));this._isBackboneCourierAvailable()?this.spawn("sortStart",{modelBeingSorted:i}):this.trigger("sortStart",i)},_sortChange:function(e,t){var i=this.collection.get(t.item.attr("data-model-cid"));this._isBackboneCourierAvailable()?this.spawn("sortChange",{modelBeingSorted:i}):this.trigger("sortChange",i)},_sortStop:function(e,t){var i=this.collection.get(t.item.attr("data-model-cid")),n=this._getContainerEl().children().index(t.item);-1==n&&i&&this.collection.remove(i),i&&(this._reorderCollectionBasedOnHTML(),this.updateDependentControls(),this._isBackboneCourierAvailable()?this.spawn("sortStop",{modelBeingSorted:i,newIndex:n}):this.trigger("sortStop",i,n))},_receive:function(e,t){var i=t.sender.data("view");if(i&&i.collection){var n=this._getContainerEl().children().index(t.item),s=i.collection.get(t.item.attr("data-model-cid"));i.collection.remove(s),this.collection.add(s,{at:n}),s.collection=this.collection,this.setSelectedModel(s)}},_over:function(e,t){this._getContainerEl().find("> var.empty-list-caption").hide()},_onKeydown:function(e){if(!this.processKeyEvents)return!0;var t=!1;if(1==this.getSelectedModels({by:"offset"}).length){var i=this.getSelectedModel({by:"offset"});e.which===this._charCodes.upArrow&&0!==i?(this.setSelectedModel(i-1,{by:"offset"}),t=!0):e.which===this._charCodes.downArrow&&i!==this.collection.length-1&&(this.setSelectedModel(i+1,{by:"offset"}),t=!0)}return!t},_listItem_onMousedown:function(t){var i=this._getClickedItemId(t);if(i){var n=this.collection.get(i);if(this._isBackboneCourierAvailable()){var s={clickedModel:n,metaKeyPressed:t.ctrlKey||t.metaKey};e.each(["preventDefault","stopPropagation","stopImmediatePropagation"],(function(e){s[e]=function(){t[e]()}})),this.spawn("click",s)}else this.trigger("click",n)}if(this.selectable&&this.clickToSelect)if(i){if(e.isFunction(this.selectableModelsFilter)&&!this.selectableModelsFilter.call(this,this.collection.get(i)))return;if(this.selectMultiple&&t.shiftKey){var o=-1;this.selectedItems.length>0&&this.collection.find((function(t){return o++,e.contains(this.selectedItems,t.cid)}),this);var l=-1;this.collection.find((function(e){return l++,e.cid==i}),this);for(var a=-1==o?l:o,r=Math.min(l,a),c=Math.max(l,a),d=[],u=r;u<=c;u++)d.push(this.collection.at(u).cid);if(this.setSelectedModels(d,{by:"cid"}),document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var h=window.getSelection();h&&h.removeAllRanges&&h.removeAllRanges()}}else(this.selectMultiple||e.contains(this.selectedItems,i))&&(this.clickToToggle||t.metaKey||t.ctrlKey)?e.contains(this.selectedItems,i)?this.setSelectedModels(e.without(this.selectedItems,i),{by:"cid"}):this.setSelectedModels(e.union(this.selectedItems,[i]),{by:"cid"}):this.setSelectedModels([i],{by:"cid"})}else this.setSelectedModels([])},_listItem_onDoubleClick:function(e){var t=this._getClickedItemId(e);if(t){var i=this.collection.get(t);this._isBackboneCourierAvailable()?this.spawn("doubleClick",{clickedModel:i,metaKeyPressed:e.ctrlKey||e.metaKey}):this.trigger("doubleClick",i)}},_listBackground_onClick:function(e){this.selectable&&this.clickToSelect&&i(e.target).is(".collection-view")&&this.setSelectedModels([])}},{setDefaultModelViewConstructor:function(e){n=e}}),t.ViewOptions={},t.ViewOptions.add=function(t,i){e.isUndefined(i)&&(i="options"),t.setOptions=function(t){var n=this,s={},o={},a=e.result(this,i);if(!e.isUndefined(a)){var r=l(a);e.each(r,(function(i,l){var a=i.required,r=i.defaultValue;if(a){if((!t||!e.contains(e.keys(t),l))&&e.isUndefined(n[l]))throw new Error('Required option "'+l+'" was not supplied.');if(t&&e.contains(e.keys(t),l)&&e.isUndefined(t[l]))throw new Error('Required option "'+l+'" can not be set to undefined.')}if(t&&l in t&&!e.isUndefined(t[l])){var c=n[l],d=t[l];e.isUndefined(c)||c===d||(o[l]=c,s[l]=d),n[l]=d}else e.isUndefined(n[l])&&(n[l]=r)}))}e.keys(s).length>0&&(e.isFunction(n.onOptionsChanged)?n.onOptionsChanged(s,o):e.isFunction(n._onOptionsChanged)&&n._onOptionsChanged(s,o))},t.getOptions=function(){var t=e.result(this,i);if(e.isUndefined(t))return{};var n=l(t),s=e.keys(n);return e.pick(this,s)}};var a=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};return t.extend(i.prototype,{add:function(e,t){var i=e.cid;this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},findIndexByCid:function(e){var i=-1;return t.find(this._views,(function(t){if(i++,t.model.cid==e)return t}))?i:-1},remove:function(e){var i=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,(function(e,t){if(e===i)return delete this._indexByCustom[t],!0}),this),delete this._views[i],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,(function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])}))},_updateLength:function(){this.length=t.size(this._views)}}),t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],(function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}})),i}(0,e);return t.CollectionView})?n.apply(t,s):n)||(e.exports=o)}.apply(t,s))||(e.exports=o)},function(e,t,i){var n;void 0===(n=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t,i;t=[],i=function(e){var i,n=_.rest(arguments),s=function(e,t){return _.isBoolean(t)?t:(_.isString(t)?e[t]:t).apply(e,n)};return _.each(t,(function(t){!i&&s(t,t._unsavedConfig[e])&&(i=t._unsavedConfig.prompt)})),i},Backbone.History.prototype.navigate=_.wrap(Backbone.History.prototype.navigate,(function(e,t,n){var s=i("unloadRouterPrompt",t,n);s?confirm(s+" \n\nAre you sure you want to leave this page?")&&e.call(this,t,n):e.call(this,t,n)})),window.onbeforeunload=function(e){return i("unloadWindowPrompt",e)},_.extend(Backbone.Model.prototype,{unsaved:{},_trackingChanges:!1,_originalAttrs:{},_unsavedChanges:{},startTracking:function(){return this._unsavedConfig=_.extend({},{prompt:"You have unsaved changes!",unloadRouterPrompt:!1,unloadWindowPrompt:!1},this.unsaved||{}),this._trackingChanges=!0,this._resetTracking(),this._triggerUnsavedChanges(),this},stopTracking:function(){return this._trackingChanges=!1,this._originalAttrs={},this._unsavedChanges={},this._triggerUnsavedChanges(),this},restartTracking:function(){return this._resetTracking(),this._triggerUnsavedChanges(),this},resetAttributes:function(){if(this._trackingChanges)return this.attributes=this._originalAttrs,this._resetTracking(),this._triggerUnsavedChanges(),this},unsavedAttributes:function(e){if(!e)return!_.isEmpty(this._unsavedChanges)&&_.clone(this._unsavedChanges);var t,i=!1,n=this._unsavedChanges;for(var s in e)_.isEqual(n[s],t=e[s])||((i||(i={}))[s]=t);return i},_resetTracking:function(){this._originalAttrs=_.clone(this.attributes),this._unsavedChanges={}},_triggerUnsavedChanges:function(){var e;this.trigger("unsavedChanges",!_.isEmpty(this._unsavedChanges),_.clone(this._unsavedChanges)),this.unsaved&&(e=this,_.isEmpty(e._unsavedChanges)?t=_.filter(t,(function(t){return e.cid!=t.cid})):_.findWhere(t,{cid:e.cid})||t.push(e))}}),Backbone.Model.prototype.set=_.wrap(Backbone.Model.prototype.set,(function(t,i,n,s){var o,l;return null==i?this:("object"===e(i)?(o=i,s=n):(o={})[i]=n,s||(s={}),l=t.call(this,o,s),this._trackingChanges&&!s.silent&&(_.each(o,_.bind((function(e,t){_.isEqual(this._originalAttrs[t],e)?delete this._unsavedChanges[t]:this._unsavedChanges[t]=e}),this)),this._triggerUnsavedChanges()),l)})),Backbone.sync=_.wrap(Backbone.sync,(function(e,t,i,n){return n||(n={}),"update"==t&&(n.success=_.wrap(n.success,_.bind((function(e,t,n,s){var o;return e&&(o=e.call(this,t,n,s)),i._trackingChanges&&(i._resetTracking(),i._triggerUnsavedChanges()),o}),this))),e(t,i,n)}))}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(36),i(25),i(42)],void 0===(s=function(e,t,i){return function(){function n(e,t,i,n){return e[t]?new e[t](i,n):(console.log('"'+t+'" not found.'),!1)}return this.get_collection=function(t,i,s){return n(e,t,i,s)},this.get_model=function(e,i,s){return n(t,e,i,s)},this.extend_view=function(){for(var e=arguments[0],t=1;arguments[t];){var n=arguments[t];i[n]&&(e.events&&i[n].events&&(e.events=_.defaults(e.events,i[n].events)),e=_.defaults(e,i[n])),t++}return Backbone.View.extend(e)},this.register_collection=function(t,i){e[t]=Backbone.Collection.extend(i)},this.register_model=function(e,i){t[e]=t.Abstract.extend(i)},this}}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(21),i(22),i(13),i(39),i(24)],void 0===(s=function(e,t,i,n,s){return{Lessons:e,QuestionChoices:t,Questions:i,QuestionTypes:n,Sections:s}}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return window.llms.hooks.applyFilters("llms_define_quiz_schema",{default:{title:LLMS.l10n.translate("General Settings"),toggleable:!0,fields:[[{attribute:"permalink",id:"permalink",type:"permalink"}],[{attribute:"content",id:"description",label:LLMS.l10n.translate("Description"),type:"editor"}],[{attribute:"passing_percent",id:"passing-percent",label:LLMS.l10n.translate("Passing Percentage"),min:0,max:100,tip:LLMS.l10n.translate("Minimum percentage of total points required to pass the quiz"),type:"number"},{attribute:"allowed_attempts",id:"allowed-attempts",label:LLMS.l10n.translate("Limit Attempts"),switch_attribute:"limit_attempts",tip:LLMS.l10n.translate("Limit the maximum number of times a student can take this quiz"),type:"switch-number"},{attribute:"time_limit",id:"time-limit",label:LLMS.l10n.translate("Time Limit"),min:1,max:360,switch_attribute:"limit_time",tip:LLMS.l10n.translate("Enforce a maximum number of minutes a student can spend on each attempt"),type:"switch-number"}],[{attribute:"show_correct_answer",id:"show-correct-answer",label:LLMS.l10n.translate("Show Correct Answers"),tip:LLMS.l10n.translate("When enabled, students will be shown the correct answer to any question they answered incorrectly."),type:"switch"},{attribute:"random_questions",id:"random-questions",label:LLMS.l10n.translate("Randomize Question Order"),tip:LLMS.l10n.translate("Display questions in a random order for each attempt. Content questions are locked into their defined positions."),type:"switch"}]]}})}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return window.llms.hooks.applyFilters("llms_define_lesson_schema",{default:{title:LLMS.l10n.translate("General Settings"),toggleable:!0,fields:[[{attribute:"permalink",id:"permalink",type:"permalink"}],[{attribute:"video_embed",id:"video-embed",label:LLMS.l10n.translate("Video Embed URL"),type:"video_embed"},{attribute:"audio_embed",id:"audio-embed",label:LLMS.l10n.translate("Audio Embed URL"),type:"audio_embed"}],[{attribute:"free_lesson",id:"free-lesson",label:LLMS.l10n.translate("Free Lesson"),tip:LLMS.l10n.translate("Free lessons can be accessed without enrollment."),type:"switch"},{attribute:"require_passing_grade",id:"require-passing-grade",label:LLMS.l10n.translate("Require Passing Grade on Quiz"),tip:LLMS.l10n.translate("When enabled, students must pass this lesson's quiz before the lesson can be completed."),type:"switch",condition:function(){return"yes"===this.get("quiz_enabled")}},{attribute:"require_assignment_passing_grade",id:"require-assignment-passing-grade",label:LLMS.l10n.translate("Require Passing Grade on Assignment"),tip:LLMS.l10n.translate("When enabled, students must pass this lesson's assignment before the lesson can be completed."),type:"switch",condition:function(){return"undefined"!==window.llms_builder.assignments&&"yes"===this.get("assignment_enabled")}},{attribute:"points",id:"points",label:LLMS.l10n.translate("Lesson Weight"),label_after:LLMS.l10n.translate("POINTS"),min:0,max:99,tip:LLMS.l10n.translate("Determines the weight of the lesson when calculating the overall grade of the course."),tip_position:"top-left",type:"number",condition:function(){return"yes"===this.get("quiz_enabled")||"undefined"!==window.llms_builder.assignments&&"yes"===this.get("assignment_enabled")}}],[{attribute:"prerequisite",condition:function(){return!1===this.is_first_in_course()},id:"prerequisite",label:LLMS.l10n.translate("Prerequisite"),switch_attribute:"has_prerequisite",type:"switch-select",options:function(){return this.get_available_prereq_options()}}],[{attribute:"drip_method",id:"drip-method",label:LLMS.l10n.translate("Drip Method"),switch_attribute:"drip_method",type:"select",options:function(){var e=[{key:"",val:LLMS.l10n.translate("None")},{key:"date",val:LLMS.l10n.translate("On a specific date")},{key:"enrollment",val:LLMS.l10n.translate("# of days after course enrollment")}];return this.get_course()&&this.get_course().get("start_date")&&e.push({key:"start",val:LLMS.l10n.translate("# of days after course start date")}),"yes"===this.get("has_prerequisite")&&e.push({key:"prerequisite",val:LLMS.l10n.translate("# of days after prerequisite lesson completion")}),e}},{attribute:"days_before_available",condition:function(){return-1!==["enrollment","start","prerequisite"].indexOf(this.get("drip_method"))},id:"days-before-available",label:LLMS.l10n.translate("# of days"),min:0,type:"number"},{attribute:"date_available",date_format:"Y-m-d",condition:function(){return"date"===this.get("drip_method")},id:"date-available",label:LLMS.l10n.translate("Date"),timepicker:"false",type:"datepicker"},{attribute:"time_available",condition:function(){return"date"===this.get("drip_method")},datepicker:"false",date_format:"h:i A",id:"time-available",label:LLMS.l10n.translate("Time"),type:"datepicker"}]]}})}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(16)],void 0===(s=function(e){return Backbone.Collection.extend({model:e,initialize:function(){this.on("add",this.comparator),this.on("remove",this.comparator)},comparator:function(e){return e.get("group").order}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(2),i(6)],void 0===(s=function(e,t){return Backbone.Model.extend(_.defaults({},e,t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(24),i(2),i(6)],void 0===(s=function(e,t,i){return Backbone.Model.extend(_.defaults({relationships:{children:{sections:{class:"Sections",model:"section",type:"collection"}}},defaults:function(){return{edit_url:"",sections:[],title:"New Course",type:"course",view_url:""}},initialize:function(){this.startTracking(),this.init_relationships(),Backbone.pubSub.on("add-new-section",this.add_section,this),Backbone.pubSub.on("add-new-lesson",this.add_lesson,this),Backbone.pubSub.on("lesson-search-select",this.add_existing_lesson,this)},add_existing_lesson:function(e){var t=e.data;"clone"===e.action?(delete t.id,t.quiz&&(t.quiz=_.prepareQuizObjectForCloning(t.quiz),t.quiz._questions_loaded=!0)):t._forceSync=!0,delete t.order,delete t.parent_course,delete t.parent_section,t.author&&_.isObject(t.author)&&t.author.id&&(t.author=t.author.id),this.add_lesson(t)},add_lesson:function(e){var t;(e=e||{}).parent_section?t=this.get("sections").get(e.parent_section):(t=this.get_selected_section())||(t=this.get("sections").last()),e._selected=!0,e.parent_course=this.get("id");var i=t.add_lesson(e,{});return Backbone.pubSub.trigger("new-lesson-added",i),t.set("_expanded",!0),i},add_section:function(e){e=e||{};var t=this.get("sections"),i={},n=this.get_selected_section();n&&(i.at=t.indexOf(n)+1),t.add(e,i)},get_selected_section:function(){return this.get("sections").find((function(e){return e.get("_selected")}))},get_total_points:function(){var e=0;return this.get("sections").each((function(t){t.get("lessons").each((function(t){var i=t.get("points");_.isNumber(i)||(i=0),e+=1*i}))})),e}},t,i))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(3),i(1),i(18),i(19),i(4),i(5)],void 0===(s=function(e,t,i,n,s,o){return{Detachable:e,Editable:t,Receivable:i,Shiftable:n,Subview:s,Trashable:o}}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return function(e){var t=this,i=e.enabled||!1;this.disable=function(){t.log("LifterLMS Builder debugging disabled"),i=!1},this.enable=function(){i=!0,t.log("LifterLMS Builder debugging enabled")},this.log=function(){i&&_.each(arguments,(function(e){console.log(e)}))},this.toggle=function(){i?t.disable():t.enable()},i&&t.enable()}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return function(e){var t=e;return _.each(t,(function(e){_.each(e,(function(e){e.custom=!0}))})),this.get=function(e,i,n){return t[i]&&(e=_.extend(e,t[i])),e},this}}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(i){"use strict";var o;i=(o=i)&&o.__esModule?o:{default:o},void 0===(s=function(){return function(e,t){this.saving=!1;var n=this,s="yes"===window.llms_builder.autosave,o=null,l=t.check_interval_ms||1e4,a=new Backbone.Collection,r=new Backbone.Collection;function c(e,t){return"success"===e.status&&(e.message=[]),e.status="error","string"==typeof t&&(t=[t]),e.message=e.message.concat(t),e}function d(){var e={};e.changes=n.get_unsaved_changes(),e.has_unsaved_changes=n.has_unsaved_changes(e.changes),e.saving=n.saving,window.llms_builder.debug.log("==== start changes check ====",e,"==== finish changes check ===="),Backbone.pubSub.trigger("current-save-status",e)}function u(e){var t;return e instanceof Backbone.Model?(t=function(e){var t,i={};if(e.get("_has_focus"))return i;h(e)||!0===e.get("_forceSync")?(i=_.clone(e.attributes),t="full"):(i=e.unsavedAttributes(),t="partial");var n=e.get_relationships?e.get_child_props():[];return i=_.omit(i,(function(e,t){return 0===t.indexOf("_")||-1!==n.indexOf(t)})),e.before_save&&(i=e.before_save(i,t)),i}(e),e.get_relationships&&_.each(e.get_child_props(),(function(i){var n=u(e.get(i));_.isEmpty(n)||(t[i]=n)})),_.isEmpty(t)||(t.id=e.get("id"))):e instanceof Backbone.Collection&&(t=[],e.each((function(e){var i=u(e);_.isEmpty(i)||t.push(i)}))),t}function h(e){return!_.isNumber(e.id)&&0===e.id.indexOf("temp_")}function p(e,t){Backbone.pubSub.trigger(e.get("type")+"-maybe-restart-tracking",e,t);var i=["id","orig_id"];e.get_relationships&&i.concat(e.get_child_props()),_.each(_.omit(t,i),(function(t,i){_.isEqual(e.get(i),t)&&(delete e._unsavedChanges[i],e._originalAttrs[i]=t)})),e.unset("_forceSync")}function f(e){var t={detach:a,trash:r};return _.each(t,(function(t,i){if(e[i]){var n=[];_.each(e[i],(function(e){e.error?n.push(e.error):t.remove(e.id)})),n.length&&_.extend(e,c(e,n))}})),e}function m(t){return t.updates?(t.updates&&(t=function e(t,i,n,s){if(!t[i])return t;if(n.get(i)instanceof Backbone.Model){var o=t[i];if(o.error)_.extend(s,c(s,o.error));else{var l=n.get(i);o.id!=o.orig_id&&(l.set("id",o.id),delete l._unsavedChanges.id),p(l,o),l.get_relationships&&_.each(l.get_child_props(),(function(n){_.extend(t[i],e(t[i],n,l,s))}))}}else n.get(i)instanceof Backbone.Collection&&_.each(t[i],(function(o,l){if(o.error)_.extend(s,c(s,o.error));else{var a=n.get(i).get(o.orig_id);o.id!=o.orig_id&&(a.set("id",o.id),delete a._unsavedChanges.id),p(a,o),a.get_relationships&&_.each(a.get_child_props(),(function(n){_.extend(t[i],e(t[i][l],n,a,s))}))}}));return s}(t.updates,"sections",e,t)),t):t}return this.get_unsaved_changes=function(){return{detach:a.pluck("id"),trash:r.pluck("id"),updates:u(e)}},this.has_unsaved_changes=function(e){return void 0===e&&(e=n.get_unsaved_changes()),!!_.find(e,(function(e){return!1===_.isEmpty(e)}))},this.save_now=function(){s?wp.heartbeat.connectNow():function(){if(!n.saving){var t=n.get_unsaved_changes();n.has_unsaved_changes(t)&&(t.id=e.get("id"),LLMS.Ajax.call({data:{action:"llms_builder",action_type:"ajax_save",course_id:t.id,llms_builder:JSON.stringify(t)},beforeSend:function(){window.llms_builder.debug.log("==== start do_ajax_save before ====",t,"==== finish do_ajax_save before ===="),n.saving=!0,Backbone.pubSub.trigger("heartbeat-send",n)},error:function(e,t,i){window.llms_builder.debug.log("==== start do_ajax_save error ====",e,"==== finish do_ajax_save error ===="),n.saving=!1,Backbone.pubSub.trigger("heartbeat-tick",n,{status:"error",message:e.responseText+" ("+i+" "+t+")"})},success:function(e){e.llms_builder&&(window.llms_builder.debug.log("==== start do_ajax_save success ====",e,"==== finish do_ajax_save success ===="),e.llms_builder=f(e.llms_builder),e.llms_builder=m(e.llms_builder),n.saving=!1,Backbone.pubSub.trigger("heartbeat-tick",n,e.llms_builder))}}))}}()},this.set_check_interval=function(e){l=e,o&&clearInterval(o),l&&(o=setInterval(d,l))},Backbone.pubSub.on("model-detached",(function(e){h(e)||a.add(_.clone(e.attributes))})),Backbone.pubSub.on("model-trashed",(function(e){if(!h(e)){var t=_.clone(e.attributes);e.get_trash_id&&(t.id=e.get_trash_id()),r.add(t)}})),(0,i.default)(document).on("heartbeat-send",(function(t,i){if(s&&!n.saving){var o=n.get_unsaved_changes();n.has_unsaved_changes(o)&&(o.id=e.get("id"),n.saving=!0,i.llms_builder=JSON.stringify(o)),window.llms_builder.debug.log("==== start heartbeat-send ====",i,"==== finish heartbeat-send ===="),Backbone.pubSub.trigger("heartbeat-send",n)}})),(0,i.default)(document).on("heartbeat-tick",(function(e,t){s&&t.llms_builder&&(window.llms_builder.debug.log("==== start heartbeat-tick ====",t,"==== finish heartbeat-tick ===="),t.llms_builder=f(t.llms_builder),t.llms_builder=m(t.llms_builder),n.saving=!1,Backbone.pubSub.trigger("heartbeat-tick",n,t.llms_builder))})),(0,i.default)(document).on("heartbeat-error",(function(e,t){s&&(window.llms_builder.debug.log("==== start heartbeat-error ====",t,"==== finish heartbeat-error ===="),n.saving=!1,Backbone.pubSub.trigger("heartbeat-tick",n,{status:"error",message:t.responseText+" ("+t.status+" "+t.statusText+")"}))})),void 0===wp.heartbeat&&(window.llms_builder.debug.log("WordPress Heartbeat disabled. Autosaving is disabled!"),s=!1),l&&n.set_check_interval(l),(0,i.default)(window).on("beforeunload",(function(){if(n.has_unsaved_changes())return d(),"Are you sure you want to abandon your changes?"})),this}}.apply(t,n=[]))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(47),i(1)],void 0===(s=function(e,t){return Backbone.View.extend(_.defaults({attributes:function(){return{"data-id":this.model.id}},el:"#llms-builder-main",tagName:"div",template:wp.template("llms-course-template"),initialize:function(){this.render(),this.sectionListView=new e({collection:this.model.get("sections")}),this.sectionListView.render(),this.sectionListView.on("sortStart",this.sectionListView.sortable_start),this.sectionListView.on("sortStop",this.sectionListView.sortable_stop),this.sectionListView.on("selectionChanged",this.active_section_change),this.listenTo(this.model.get("sections"),"add",this.on_section_add),Backbone.pubSub.on("section-toggle",this.on_section_toggle,this),Backbone.pubSub.on("expand-section",this.expand_section,this),Backbone.pubSub.on("lesson-selected",this.active_lesson_change,this)},render:function(){return this.$el.html(this.template(this.model)),this},active_lesson_change:function(e){var t=this.model.get("sections").get(e.get("parent_section"));this.sectionListView.setSelectedModel(t)},active_section_change:function(e,t){_.each(e,(function(e){e.set("_selected",!0)})),_.each(t,(function(e){e.set("_selected",!1)}))},on_section_add:function(e){this.sectionListView.setSelectedModel(e)},on_section_toggle:function(e){var t=e.get("_expanded")?[e]:[];this.sectionListView.setSelectedModels(t)}},t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(26),i(18)],void 0===(s=function(e,t){return Backbone.CollectionView.extend(_.defaults({el:"#llms-sections",events:{"mousedown > li.llms-section > .llms-builder-header .llms-headline":"_listItem_onMousedown",click:"_listBackground_onClick","click ul.collection-view":"_listBackground_onClick",keydown:"_onKeydown"},modelView:e,processKeyEvents:!1,selectable:!0,sortable:!0,sortableOptions:{axis:!1,cursor:"move",handle:".drag-section",items:".llms-section",placeholder:"llms-section llms-sortable-placeholder"},sortable_start:function(e){this.$el.addClass("dragging")},sortable_stop:function(e){this.$el.removeClass("dragging")}},t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(27),i(18)],void 0===(s=function(e,t){return Backbone.CollectionView.extend(_.defaults({className:"llms-lessons",modelView:e,selectable:!1,sortable:!0,sortableOptions:{axis:!1,connectWith:".llms-lessons",cursor:"move",handle:".drag-lesson",items:".llms-lesson",placeholder:"llms-lesson llms-sortable-placeholder"},sortable_start:function(e){(0,o.default)(".llms-lessons").addClass("dragging")},sortable_stop:function(e){(0,o.default)(".llms-lessons").removeClass("dragging")},_sortStop:function(e,t){var i=this.collection.get(t.item.attr("data-model-cid")),n=this._getContainerEl().children().index(t.item);-1==n&&i&&this.collection.remove(i),this._reorderCollectionBasedOnHTML(),this.updateDependentControls(),this._isBackboneCourierAvailable()?this.spawn("sortStop",{modelBeingSorted:i,newIndex:n}):this.trigger("sortStop",i,n)}},t))}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=(l=o)&&l.__esModule?l:{default:l},n=[i(50),i(60),i(61),i(4)],void 0===(s=function(e,t,i,n){return Backbone.View.extend(_.defaults({state:"builder",views:{elements:{class:t,instance:null,state:"builder"},utilities:{class:i,instance:null,state:"builder"},editor:{class:e,instance:null,state:"editor"}},el:"#llms-builder-sidebar",events:{"click #llms-save-button":"save_now","click #llms-exit-button":"exit_now","click .llms-builder-error":"clear_errors"},tagName:"aside",template:wp.template("llms-sidebar-template"),initialize:function(e){this.CourseView=e.CourseView,this.render(),Backbone.pubSub.on("current-save-status",this.changes_made,this),Backbone.pubSub.on("heartbeat-send",this.heartbeat_send,this),Backbone.pubSub.on("heartbeat-tick",this.heartbeat_tick,this),Backbone.pubSub.on("lesson-selected",this.on_lesson_select,this),Backbone.pubSub.on("sidebar-editor-close",this.on_editor_close,this),this.$saveButton=(0,o.default)("#llms-save-button")},render:function(e){e=e||{},this.$el.html(this.template()),this.render_subviews(_.extend(e,{SidebarView:this}));var t=(0,o.default)(".wrap.lifterlms.llms-builder");return"builder"===this.state?t.removeClass("editor-active"):t.addClass("editor-active"),this.$saveButton=this.$el.find("#llms-save-button"),this},add_error:function(e){this.$el.find(".llms-builder-save").prepend(e)},clear_errors:function(){this.$el.find(".llms-builder-save .llms-builder-error").remove()},changes_made:function(e){e.saving||(e.has_unsaved_changes?(this.$saveButton.attr("data-status","unsaved"),this.$saveButton.removeAttr("disabled")):(this.$saveButton.attr("data-status","saved"),this.$saveButton.attr("disabled","disabled")))},exit_now:function(){window.location.href=window.llms_builder.CourseModel.get_edit_post_link()},heartbeat_send:function(e){e.saving&&(LLMS.Spinner.start(this.$saveButton.find("i"),"small"),this.$saveButton.attr({"data-status":"saving",disabled:"disabled"}))},heartbeat_tick:function(e,t){if(!e.saving){var i="saved";if(this.clear_errors(),"error"===t.status){i="error";var n=t.message,s=(0,o.default)('<ol class="llms-builder-error" />');"object"===a(n)?_.each(n,(function(e){s.append("<li>"+e+"</li>")})):s=s.append("<li>"+n+"</li>"),this.add_error(s)}this.$saveButton.find(".llms-spinning").remove(),this.$saveButton.attr({"data-status":i,disabled:"disabled"})}},is_editor_active:function(){return"editor"===this.state},on_editor_close:function(){this.set_state("builder").render()},on_lesson_select:function(e,t){"editor"!==this.state?this.set_state("editor"):this.remove_subview("editor"),this.render({model:e,tab:t})},save_now:function(){window.llms_builder.sync.save_now()}},n))}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(51),i(52),i(59),i(4)],void 0===(s=function(e,t,i,n){return Backbone.View.extend(_.defaults({state:"lesson",views:{lesson:{class:e,instance:null,state:"lesson"},assignment:{class:i,instance:null,state:"assignment"},quiz:{class:t,instance:null,state:"quiz"}},el:"#llms-editor",events:{'click .llms-editor-nav a[href="#llms-editor-close"]':"close_editor",'click .llms-editor-nav a:not([href="#llms-editor-close"])':"switch_tab"},tagName:"div",template:wp.template("llms-editor-template"),initialize:function(e){this.SidebarView=e.SidebarView,e.tab&&(this.state=e.tab)},render:function(e){return e=e||{},this.$el.html(this.template(this)),this.render_subviews(_.extend(e,{lesson:this.model})),this},close_editor:function(e){e.preventDefault(),Backbone.pubSub.trigger("sidebar-editor-close"),window.location.hash=""},switch_tab:function(e){e.preventDefault();var t=(0,o.default)(e.target),i=t.attr("data-view");this.$el.find(t.attr("href")),this.set_state(i).render(),this.set_hash(i)},set_hash:function(e){var t="lesson:"+this.model.get("id");"lesson"!==e&&(t+=":"+e),window.location.hash=t}},n))}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(3),i(1),i(5),i(4),i(20)],void 0===(s=function(e,t,i,n,s){return Backbone.View.extend(_.defaults({state:"default",views:{settings:{class:s,instance:null,state:"default"}},el:"#llms-editor-lesson",events:_.defaults({},e.events,t.events,i.events),template:wp.template("llms-lesson-settings-template"),initialize:function(e){this.model=e.lesson;var t=window.llms.hooks.applyFilters("llms_lesson_rerender_change_events",["change:date_available","change:drip_method","change:time_available"]);_.each(t,(function(e){this.listenTo(this.model,e,this.render)}),this),this.listenTo(this.model,"change:points",this.render_points_percentage),this.listenTo(this.model,"change:has_prerequisite",(function(e,t){"yes"===t&&this.$el.find('select[name="prerequisite"]').trigger("change")}))},render:function(){return this.$el.html(this.template(this.model)),this.remove_subview("settings"),this.render_subview("settings",{el:"#llms-lesson-settings-fields",model:this.model}),this.init_datepickers(),this.init_selects(),this.render_points_percentage(),this},render_points_percentage:function(){this.$el.find("#llms-model-settings-field--points .llms-editable-input").addClass("tip--top-left").attr("data-tip",this.model.get_points_percentage())}},e,t,i,n,s))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(12),i(8),i(9),i(53),i(55),i(20),i(3),i(1),i(4),i(5)],void 0===(s=function(e,t,i,n,s,l,a,r,c,d){return Backbone.View.extend(_.defaults({state:"default",views:{settings:{class:l,instance:null,state:"default"},bank:{class:n,instance:null,state:"default"},list:{class:s,instance:null,state:"default"}},el:"#llms-editor-quiz",events:_.defaults({"click #llms-existing-quiz":"add_existing_quiz_click","click #llms-new-quiz":"add_new_quiz","click #llms-show-question-bank":"show_tools","click .bulk-toggle":"bulk_toggle"},a.events,r.events,d.events),tagName:"div",template:wp.template("llms-quiz-template"),initialize:function(e){this.lesson=e.lesson,"yes"!==this.lesson.get("quiz_enabled")&&_.isEmpty(this.lesson.get("quiz"))||(this.model=this.lesson.get("quiz"),this.model.set_parent(this.lesson),this.listenTo(this.model,"change:_points",this.render_points)),this.on("model-trashed",this.on_trashed)},render:function(){if(this.$el.html(this.template(this.model)),this.model){LLMS.Spinner.start(this.$el),this.render_subview("settings",{el:"#llms-quiz-settings-fields",model:this.model}),this.init_datepickers(),this.init_selects(),this.render_subview("bank",{collection:window.llms_builder.questions});var e=null,t=null;this.get_subview("bank").instance.viewManager.each((function(i){i.quiz=this.model,t=i.model.get("group").name,e!==t&&(e=t,i.$el.before('<li class="llms-question-bank-header"><h4>'+t+"</h4></li>"))}),this),this.model.load_questions(_.bind((function(e){if(e)return alert(LLMS.l10n.translate("An error occurred while trying to load the questions. Please refresh the page and try again.")),this;LLMS.Spinner.stop(this.$el),this.render_subview("list",{el:"#llms-quiz-questions",collection:this.model.get("questions")});var t=this.get_subview("list").instance;t.quiz=this,t.collection.on("add",(function(){t.collection.trigger("reorder")}),this),t.on("sortStart",t.sortable_start),t.on("sortStop",t.sortable_stop)}),this)),this.model.on("new-question-added",(function(){var e=this.$el.find("#llms-quiz-questions");e.animate({scrollTop:e.prop("scrollHeight")},200)}),this)}return this},render_points:function(e,t){this.$el.find("#llms-quiz-total-points").text(t)},bulk_toggle:function(e){var t="expand"===(0,o.default)(e.target).attr("data-action");this.model.get("questions").each((function(e){e.set("_expanded",t)}))},add_new_quiz:function(){var e=this.lesson.get("quiz");_.isEmpty(e)?e=this.lesson.add_quiz():this.lesson.set("quiz_enabled","yes"),this.model=e,this.render()},add_existing_quiz:function(e){this.post_search_popover.hide();var t=e.data;"clone"===e.action?t=_.prepareQuizObjectForCloning(t):t._forceSync=!0,delete t.lesson_id,this.lesson.add_quiz(t),this.model=this.lesson.get("quiz"),this.render()},add_existing_quiz_click:function(e){e.preventDefault(),this.post_search_popover=new t({el:"#llms-existing-quiz",args:{backdrop:!0,closeable:!0,container:".wrap.lifterlms.llms-builder",dismissible:!0,placement:"left",width:480,title:LLMS.l10n.translate("Add Existing Quiz"),content:new i({post_type:"llms_quiz",searching_message:LLMS.l10n.translate("Search for existing quizzes...")}).render().$el,onHide:function(){Backbone.pubSub.off("quiz-search-select")}}}),this.post_search_popover.show(),Backbone.pubSub.once("quiz-search-select",this.add_existing_quiz,this)},on_trashed:function(e){this.lesson.set("quiz_enabled","no"),this.lesson.set("quiz",""),delete this.model,this.render()},show_tools:function(){var e=new t({el:"#llms-show-question-bank",args:{backdrop:!0,closeable:!0,container:"#llms-builder-sidebar",dismissible:!0,placement:"top-left",width:"calc( 100% - 40px )",title:LLMS.l10n.translate("Add a Question"),url:"#llms-quiz-tools"}});e.show(),this.model.on("new-question-added",(function(){e.hide()}))},get_question_list:function(e){return new s(e)}},a,r,c,d,l))}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(54)],void 0===(s=function(e){return Backbone.CollectionView.extend({className:"llms-question",el:"#llms-question-bank",modelView:e,selectable:!1,sortable:!1})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(8),i(9)],void 0===(s=function(e,t){return Backbone.View.extend({className:"llms-question-type",events:{"click .llms-add-question":"add_question"},id:function(){return"llms-question-type-"+this.model.id},tagName:"li",template:wp.template("llms-question-type-template"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model)),this},add_question:function(){"existing"===this.model.get("id")?this.add_existing_question_click():this.add_new_question()},add_existing_question_click:function(){var i=new e({el:"#llms-add-question--existing",args:{backdrop:!0,closeable:!0,container:"#llms-builder-sidebar",dismissible:!0,placement:"top-left",width:"calc( 100% - 40px )",offsetLeft:250,offsetTop:60,title:LLMS.l10n.translate("Add Existing Question"),content:new t({post_type:"llms_question",searching_message:LLMS.l10n.translate("Search for existing questions...")}).render().$el}});i.show(),Backbone.pubSub.on("question-search-select",this.add_existing_question,this),Backbone.pubSub.on("question-search-select",(function(e){i.hide(),Backbone.pubSub.off("question-search-select",this.add_existing_question,this)}),this)},add_existing_question:function(e){var t=e.data;"clone"===e.action?t=_.prepareQuestionObjectForCloning(t):t._forceSync=!0,t._expanded=!0,this.quiz.add_question(t),this.quiz.trigger("new-question-added")},add_new_question:function(){this.quiz.add_question({_expanded:!0,choices:this.model.get("default_choices")?this.model.get("default_choices"):null,question_type:this.model}),this.quiz.trigger("new-question-added")}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(56)],void 0===(s=function(e){return Backbone.CollectionView.extend({className:"llms-quiz-questions",modelView:e,processKeyEvents:!1,selectable:!1,sortable:!0,sortableOptions:{axis:!1,connectWith:".llms-quiz-questions",cursor:"move",handle:".llms-data-stamp",items:".llms-question",placeholder:"llms-question llms-sortable-placeholder"},sortable_start:function(e){var t="group"===e.get("question_type").get("id")?".llms-editor-tab > .llms-quiz-questions":".llms-quiz-questions";(0,o.default)(t).addClass("dragging")},sortable_stop:function(){(0,o.default)(".llms-quiz-questions").removeClass("dragging")},_receive:function(e,t){if(e.stopPropagation(),t.item.hasClass("qtype--group")&&(0,o.default)(e.target).closest(".qtype--group").length)t.sender.sortable("cancel");else{var i=t.sender.data("view");if(i&&i.collection){var n=this._getContainerEl().children().index(t.item),s=i.collection.get(t.item.attr("data-model-cid"));i.collection.remove(s),this.collection.add(s,{at:n}),s.collection=this.collection,this.setSelectedModel(s)}}},_sortStart:function(e,t){var i=this.collection.get(t.item.attr("data-model-cid"));t.placeholder.addClass("qtype--"+i.get("question_type").get("id")),this._isBackboneCourierAvailable()?this.spawn("sortStart",{modelBeingSorted:i}):this.trigger("sortStart",i)},_sortStop:function(e,t){e.stopPropagation();var i=this.collection.get(t.item.attr("data-model-cid")),n=this._getContainerEl().children().index(t.item);-1==n&&i&&this.collection.remove(i),this._reorderCollectionBasedOnHTML(),this.updateDependentControls(),this._isBackboneCourierAvailable()?this.spawn("sortStop",{modelBeingSorted:i,newIndex:n}):this.trigger("sortStop",i,n)}})}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(3),i(1),i(57)],void 0===(s=function(e,t,i){return Backbone.View.extend(_.defaults({className:function(){return"llms-question qtype--"+this.model.get("question_type").get("id")},events:_.defaults({"click .clone--question":"clone","click .delete--question":"delete","click .expand--question":"expand","click .collapse--question":"collapse",'change input[name="question_points"]':"update_points"},e.events,t.events),id:function(){return"llms-question-"+this.model.id},tagName:"li",template:wp.template("llms-question-template"),initialize:function(){_.each(["change:_expanded","change:menu_order"],(function(e){this.listenTo(this.model,e,this.render)}),this),this.listenTo(this.model.get("image"),"change",this.render),this.listenTo(this.model.get_parent(),"change:_points",this.render_points_percentage),this.on("multi_choices_toggle",this.multi_choices_toggle,this),Backbone.pubSub.on("del-question-choice",this.del_choice,this)},render:function(){if(this.$el.html(this.template(this.model)),this.model.get("question_type").get("choices")&&(this.choiceListView=new i({el:this.$el.find(".llms-question-choices"),collection:this.model.get("choices")}),this.choiceListView.render(),this.choiceListView.on("sortStart",this.choiceListView.sortable_start),this.choiceListView.on("sortStop",this.choiceListView.sortable_stop)),"group"===this.model.get("question_type").get("id")){var e=this;setTimeout((function(){e.questionListView=e.collectionListView.quiz.get_question_list({el:e.$el.find(".llms-quiz-questions"),collection:e.model.get("questions")}),e.questionListView.render(),e.questionListView.on("sortStart",e.questionListView.sortable_start),e.questionListView.on("sortStop",e.questionListView.sortable_stop)}),1)}return this.model.get("description_enabled")&&this.init_editor("question-desc--"+this.model.get("id")),this.model.get("clarifications_enabled")&&this.init_editor("question-clarifications--"+this.model.get("id"),{mediaButtons:!1,tinymce:{toolbar1:"bold,italic,strikethrough,bullist,numlist,alignleft,aligncenter,alignright",toolbar2:"",setup:_.bind(this.on_editor_ready,this)}}),this.init_formatting_els(),this.init_selects(),this},render_points_percentage:function(){this.$el.find(".llms-question-points").attr("data-tip",this.model.get_points_percentage())},clone:function(e){e.stopPropagation(),e.preventDefault(),this.model.collection.add(this._get_question_clone(this.model))},_get_question_clone:function(e){var t=_.clone(e.attributes);return delete t.id,t.parent_id=e.get("id"),t.question_type=e.get("question_type").get("id"),t.image=_.clone(e.get("image").attributes),e.get("choices")&&(t.choices=[],e.get("choices").each((function(e){var i=_.clone(e.attributes);delete i.id,delete i.question_id,t.choices.push(i)}))),"group"===e.get("question_type").get("id")&&(t.questions=[],e.get("questions").each((function(e){t.questions.push(this._get_question_clone(e))}),this)),t},collapse:function(e){e&&e.preventDefault(),this.model.set("_expanded",!1)},delete:function(e){e.preventDefault(),window.confirm(LLMS.l10n.translate("Are you sure you want to delete this question?"))&&(this.model.collection.remove(this.model),Backbone.pubSub.trigger("model-trashed",this.model))},expand:function(e){e&&e.preventDefault(),this.model.set("_expanded",!0)},multi_choices_toggle:function(e){"yes"!==e&&this.model.get("choices").update_correct(_.first(this.model.get("choices").get_correct()))},update_points:function(){this.model.set("points",1*this.$el.find('input[name="question_points"]').val())}},e,t))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(58)],void 0===(s=function(e){return Backbone.CollectionView.extend({className:"llms-quiz-questions",modelView:e,processKeyEvents:!1,selectable:!1,sortable:!0,sortableOptions:{axis:!1,cursor:"move",handle:".llms-choice-id",items:".llms-question-choice",placeholder:"llms-question-choice llms-sortable-placeholder"},sortable_start:function(e){this.$el.addClass("dragging")},sortable_stop:function(e){this.$el.removeClass("dragging")}})}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(1)],void 0===(s=function(e){return Backbone.View.extend(_.defaults({className:"llms-question-choice",events:_.defaults({'change input[name="correct"]':"toggle_correct",'click .llms-action-icon[href="#llms-add-choice"]':"add_choice",'click .llms-action-icon[href="#llms-del-choice"]':"del_choice"},e.events),id:function(){return"llms-question-choice-"+this.model.id},tagName:"li",template:wp.template("llms-question-choice-template"),initialize:function(){this.render(),this.listenTo(this.model.collection,"add",this.maybe_disable_buttons),this.listenTo(this.model,"change",this.render),"image"===this.model.get("choice_type")&&this.listenTo(this.model.get("choice"),"change",this.render)},render:function(){return this.$el.html(this.template(this.model)),this},add_choice:function(e){e.stopPropagation(),e.preventDefault();var t=this.model.collection.indexOf(this.model);this.model.collection.parent.add_choice({},{at:t+1})},del_choice:function(e){e.preventDefault(),Backbone.pubSub.trigger("model-trashed",this.model),this.model.collection.remove(this.model)},toggle_correct:function(){var e=this.$el.find('input[name="correct"]').is(":checked");this.model.set("correct",e),this.model.collection.trigger("correct-update",this.model)}},e))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;void 0===(s=function(){"use strict";n=[i(8),i(9),i(3),i(1),i(5),i(4),i(20)],void 0===(s=function(e,t,i,n,s,o,l){return Backbone.View.extend(_.defaults({state:"default",views:{settings:{class:l,instance:null,state:"default"}},el:"#llms-editor-assignment",events:function(){var e=this.is_addon_available()?window.llms_builder.assignments.get_view_events():{};return _.defaults({"click #llms-existing-assignment":"add_existing_assignment_click","click #llms-new-assignment":"add_new_assignment"},i.events,n.events,s.events,e)},tagName:"div",template:wp.template("llms-assignment-template"),initialize:function(e){this.lesson=e.lesson,"yes"!==this.lesson.get("assignment_enabled")&&_.isEmpty(this.lesson.get("assignment"))||(this.model=this.lesson.get("assignment"),this.model.set_parent(this.lesson)),this.on("model-trashed",this.on_trashed)},render:function(){return this.$el.html(this.template(this.model)),this.model&&this.is_addon_available()&&(this.stopListening(this.model,"change:assignment_type",this.render),this.render_subview("settings",{el:"#llms-assignment-settings-fields",model:this.model}),this.init_selects(),window.llms_builder.assignments.render_editor(this),this.listenTo(this.model,"change:assignment_type",this.render)),this},add_new_assignment:function(){this.is_addon_available()?(this.model=window.llms_builder.assignments.get_assignment({
/* translators: %1$s = associated lesson title */
title:LLMS.l10n.replace("%1$s Assignment",{"%1$s":this.lesson.get("title")}),lesson_id:this.lesson.get("id")}),this.lesson.set("assignment_enabled","yes"),this.lesson.set("assignment",this.model),this.render()):this.show_ad_popover("#llms-new-assignment")},add_existing_assignment:function(e){this.post_search_popover.hide();var t=e.data;"clone"===e.action?delete t.id:t._forceSync=!0,t.lesson_id=this.lesson.get("id"),t=window.llms_builder.construct.get_model("Assignment",t),this.lesson.set("assignment_enabled","yes"),this.lesson.set("assignment",t),this.model=t,this.render()},add_existing_assignment_click:function(i){i.preventDefault(),this.is_addon_available()?(this.post_search_popover=new e({el:"#llms-existing-assignment",args:{backdrop:!0,closeable:!0,container:".wrap.lifterlms.llms-builder",dismissible:!0,placement:"left",width:480,title:LLMS.l10n.translate("Add Existing Assignment"),content:new t({post_type:"llms_assignment",searching_message:LLMS.l10n.translate("Search for existing assignments...")}).render().$el,onHide:function(){Backbone.pubSub.off("assignment-search-select")}}}),this.post_search_popover.show(),Backbone.pubSub.once("assignment-search-select",this.add_existing_assignment,this)):this.show_ad_popover("#llms-existing-assignment")},is_addon_available:function(){return window.llms_builder.assignments},on_trashed:function(e){this.lesson.set("assignment_enabled","no"),this.lesson.set("assignment",""),delete this.model,this.render()},show_ad_popover:function(t){var i=LLMS.l10n.translate("Get Your Students Taking Action"),n=LLMS.l10n.translate("Get Assignments Now!");this.ad_popover=new e({el:t,args:{backdrop:!0,closeable:!0,container:".wrap.lifterlms.llms-builder",dismissible:!0,width:380,title:LLMS.l10n.translate("Unlock LifterLMS Assignments"),content:"<h3>"+i+'</h3><p>Great learning content is only half of teaching online. When your learners fully engage, they will take your content and move into action. Remove barriers for your learners by telling them what to do to apply what they just learned. Create graded assignments or simply give them a checklist of action items to complete before moving on.</p><br><p><a class="llms-button-primary" href="https://lifterlms.com/product/lifterlms-assignments?utm_source=LifterLMS%20Plugin&utm_medium=Assignment%20Builder%20Button&utm_campaign=Assignment%20Addon%20Upsell&utm_content=3.17.0" target="_blank">'+n+"</a></p>"}}),this.ad_popover.show()}},i,n,s,o,l))}.apply(t,n))||(e.exports=s)}.apply(t,n=[]))||(e.exports=s)},function(e,t,i){var n,s;n=[i(0)],void 0===(s=function(o){"use strict";var l;o=(l=o)&&l.__esModule?l:{default:l},n=[i(17),i(26),i(7),i(27),i(8),i(9)],void 0===(s=function(e,t,i,n,s,l){return Backbone.View.extend({el:"#llms-elements",events:{"click #llms-new-section":"add_new_section","click #llms-new-lesson":"add_new_lesson","click #llms-existing-lesson":"add_existing_lesson"},tagName:"div",template:wp.template("llms-elements-template"),initialize:function(e){this.SidebarView=e.SidebarView,this.listenTo(this.SidebarView.CourseView.model.get("sections"),"add",this.maybe_disable_buttons),this.listenTo(this.SidebarView.CourseView.model.get("sections"),"remove",this.maybe_disable_buttons)},render:function(){return this.$el.html(this.template()),this.draggable(),this.maybe_disable_buttons(),this},draggable:function(){(0,o.default)("#llms-new-section").draggable({appendTo:"#llms-sections",cancel:!1,connectToSortable:".llms-sections",helper:function(){return new t({model:new e}).render().$el},start:function(){(0,o.default)(".llms-sections").addClass("dragging")},stop:function(){(0,o.default)(".llms-sections").removeClass("dragging")}}),(0,o.default)("#llms-new-lesson").draggable({appendTo:"#llms-sections",cancel:!1,connectToSortable:".llms-lessons",helper:function(){return new n({model:new i}).render().$el},start:function(){(0,o.default)(".llms-lessons").addClass("dragging")},stop:function(){(0,o.default)(".llms-lessons").removeClass("dragging"),(0,o.default)(".drag-expanded").removeClass(".drag-expanded")}})},add_new_section:function(e){e.preventDefault(),Backbone.pubSub.trigger("add-new-section")},add_new_lesson:function(e){e.preventDefault(),Backbone.pubSub.trigger("add-new-lesson")},add_existing_lesson:function(e){e.preventDefault();var t=new s({el:"#llms-existing-lesson",args:{backdrop:!0,closeable:!0,container:".wrap.lifterlms.llms-builder",dismissible:!0,placement:"left",width:480,title:LLMS.l10n.translate("Add Existing Lesson"),content:new l({post_type:"lesson",searching_message:LLMS.l10n.translate("Search for existing lessons...")}).render().$el}});t.show(),Backbone.pubSub.on("lesson-search-select",(function(){t.hide()}))},maybe_disable_buttons:function(){var e=(0,o.default)("#llms-new-lesson, #llms-existing-lesson");this.SidebarView.CourseView.model.get("sections").length?e.removeAttr("disabled"):e.attr("disabled","disabled")}})}.apply(t,n))||(e.exports=s)}.apply(t,n))||(e.exports=s)},function(e,t,i){var n;void 0===(n=function(){"use strict";void 0===(n=function(){return Backbone.View.extend({el:"#llms-utilities",events:{"click #llms-collapse-all":"collapse_all","click #llms-expand-all":"expand_all"},tagName:"div",template:wp.template("llms-utilities-template"),initialize:function(){},render:function(){return this.$el.html(this.template()),this},collapse_all:function(e){e.preventDefault(),Backbone.pubSub.trigger("collapse-all")},expand_all:function(e){e.preventDefault(),Backbone.pubSub.trigger("expand-all")}})}.apply(t,[]))||(e.exports=n)}.apply(t,[]))||(e.exports=n)}]);